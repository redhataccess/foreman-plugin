"use strict";angular.module("telemetryConfig",[]).value("CONFIG",{autoRefresh:3e5,authenticate:!0,allowExport:!0,doPaf:!0,API_ROOT:"/rs/telemetry/api/",ACCT_KEY:"telemetry:account_number"}).run(["CONFIG",function(a){window.localStorage.getItem("tapi:dev")&&(a.API_ROOT="v1/")}]),angular.module("telemetryApp",["telemetryConfig","telemetryTemplates","telemetryApi","telemetryWidgets","telemetryRoutes","ui.router","ui.bootstrap","angular-loading-bar","ngResource","selectize-ng"]).config(["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider","$httpProvider","$anchorScrollProvider",function(a,b,c,d,e,f){b.otherwise("/overview"),b.when("/error_infos","/rules/admin"),b.when("/rules","/rules/"),d.html5Mode(!0),c.strictMode(!1),e.interceptors.push("xomitInterceptor"),e.interceptors.push("authInterceptor"),f.disableAutoScrolling()}]).factory("xomitInterceptor",["$rootScope","$q",function(){return{request:function(a){return a&&a.headers&&(a.headers["X-Omit"]="WWW-Authenticate"),a}}}]).factory("authInterceptor",["$rootScope","$q","Bounce",function(a,b,c){return{responseError:function(a){return 401===a.status?(c.bounce(),b.reject(a)):b.reject(a)}}}]).run(["$rootScope","CONFIG","User","PermissionService","Analytics","$state","$urlRouter",function(a,b,c,d,e,f,g){a.$on("$stateChangeSuccess",function(){e.pageLoad()}),b.authenticate&&a.$on("$stateChangeStart",function(a,b){var e=c.current;b.permission&&!e.loaded?(a.preventDefault(),c.asyncCurrent(function(a){d.has(a,d.PERMS[b.permission])?g.sync():f.go("forbidden")})):b.permission&&!d.has(e,d.PERMS[b.permission])&&f.go("forbidden")})}]),function(){angular.module("telemetryApi",["telemetryConfig"]).factory("Account",["$rootScope","User","CONFIG",function(a,b,c){var d=b.current,e=d.account_number,f=window.sessionStorage.getItem(c.ACCT_KEY);return d.is_internal&&f&&(e=f),a.$on("account:change",function(b,c){e!=c&&(e=c,a.$broadcast("reload:data"))}),{current:function(a){if(e){var b=a?a:"?";return b+="account_number="+e}return""},number:function(){return e}}}])}(),angular.module("telemetryApp").config(["$stateProvider",function(a){a.state("admin-rules",{url:"/rules/admin",templateUrl:"app/rules/views/admin-rules.html",controller:"AdminRuleCtrl",hideGroup:!0}).state("create-rule",{url:"/rules/new",templateUrl:"app/rules/views/create-rules.html",controller:"NewRuleCtrl",hideGroup:!0}).state("show-rule",{url:"/rules/:id",templateUrl:"app/rules/views/show-rules.html",controller:"ShowRuleCtrl",hideGroup:!0}).state("edit-rule",{url:"/rules/:id/edit",templateUrl:"app/rules/views/edit-rules.html",controller:"EditRuleCtrl",hideGroup:!0}),a.state("forbidden",{url:"/403",templateUrl:"app/pages/views/403.html"}),a.state("config",{url:"/config/:tab",templateUrl:"app/config/views/config.html",controller:"ConfigCtrl",params:{tab:null},hideGroup:!0}),a.state("announcements",{url:"/announcements",templateUrl:"app/announcements/announcements.html",controller:"ListAnnouncementCtrl"}).state("new-announcement",{url:"/announcements/new",templateUrl:"app/announcements/new-announcement.html",controller:"NewAnnouncementCtrl",permission:"CREATE_ANNOUNCEMENT"}).state("edit-announcement",{url:"/announcements/:id/edit",templateUrl:"app/announcements/edit-announcement.html",controller:"EditAnnouncementCtrl",permission:"CREATE_ANNOUNCEMENT"}).state("view-announcement",{url:"/announcements/:slug",templateUrl:"app/announcements/view-announcement.html",controller:"ViewAnnouncementCtrl"})}]),angular.module("telemetryRoutes",["ui.router"]),angular.module("telemetryRoutes").config(["$stateProvider",function(a){a.state("overview",{url:"/overview/{category}",templateUrl:"app/overview/overview.html",controller:"OverviewCtrl",params:{category:{value:null,squash:!0}},overview:!0}).state("overview-rule",{url:"/overview/:category/:rule",templateUrl:"components/overview/overviewRule/overviewRule.html",controller:"OverviewRuleCtrl",overview:!0}),a.state("systems",{url:"/systems",templateUrl:"app/systems/systems.html",controller:"SystemCtrl",reloadOnSearch:!1}),a.state("rules",{url:"/rules/",templateUrl:"app/rules/views/list-rules.html",controller:"ListRuleCtrl",hideGroup:!0})}]),angular.module("telemetryWidgets",["telemetryApi","telemetryConfig","telemetryTemplates","yaru22.angular-timeago","ui.bootstrap","ngTable","ui.router","oitozero.ngSweetAlert"]),angular.module("telemetryApi").factory("Ack",["$http","$q","$rootScope","Account","CONFIG",function(a,b,c,d,e){function f(){var b=a.get(e.API_ROOT+"acks?include=rule"+d.current("&")).success(function(a){g.length=0,Array.prototype.push.apply(g,a),angular.extend(h,_.indexBy(g,"rule_id"))});return b}var g=[],h={},i=!1;return c.$on("reload:data",f),{init:function(){i||(f(),i=!0)},acks:g,ackMap:h,createAck:function(c){var f=b.defer();return a.post(e.API_ROOT+"acks"+d.current(),{rule_id:c.rule_id||c.id}).success(function(a){g.push(a),h[a.rule_id]=a,f.resolve(a)}),f.promise},deleteAck:function(b){return a["delete"](e.API_ROOT+"acks/"+b.id+d.current()).success(function(){var a,c=g.length;for(a=0;c>a;a++)if(g[a].id===b.id)return g.splice(a,1),void delete h[b.rule_id]})},reload:f}}]),angular.module("telemetryApi").factory("Announcement",["$http","$q","Account","CONFIG",function(a,b,c,d){function e(){return a.get(d.API_ROOT+"announcements").success(function(a){j.length=0,h.count=0,angular.forEach(a,function(a){a.seen===!1&&h.count++}),Array.prototype.push.apply(j,a)})}function f(b){return a.get(d.API_ROOT+"announcements/"+b)}function g(b){return a.get(d.API_ROOT+"announcements/"+b)}var h={count:0},i=!1,j=[];return{init:function(){i||(e(),i=!0)},announcements:j,unseen:h,bySlug:function(a){var c=b.defer();if(i){var d,e=null,g=j.length;for(d=0;g>d;d++)j[d].slug!==a||(e=j[d]);e?c.resolve(e):f(a).success(function(a){c.resolve(a)})}else f(a).success(function(a){c.resolve(a)});return c.promise},byId:function(a){var c=b.defer();if(i){var d,e=null,f=j.length;for(d=0;f>d;d++)j[d].id!==a||(e=j[d]);e?c.resolve(e):g(a).success(function(a){c.resolve(a)})}else g(a).success(function(a){c.resolve(a)});return c.promise},createAnnouncement:function(b){return a.post(d.API_ROOT+"announcements?internal=true",b).success(function(a){a.hidden||j.push(a)})},acknowledge:function(b){return a.post(d.API_ROOT+"announcements/"+b.id+"/ack").success(function(a){var b,c=j.length;for(b=0;c>b;b++)if(j[b].id===a.id)return j[b]=a,void h.count--})},reload:e}}]),angular.module("telemetryApi").factory("Group",["$http","$q","$rootScope","CONFIG","Account",function(a,b,c,d,e){function f(){a.get(d.API_ROOT+"groups?include=systems"+e.current("&")).success(function(a){j.length=0,Array.prototype.push.apply(j,a)})}function g(a,b){var c,d,e=j.length;for(c=0;e>c;c++)if(j[c].id===a.id){var f=j[c].systems.length;for(d=0;f>d;d++)if(j[c].systems[d].machine_id===b.machine_id)return void j[c].systems.splice(d,1)}}function h(b,c){return g(b,c),a["delete"](d.API_ROOT+"groups/"+b.id+"/systems/"+c.machine_id+e.current())}function i(a){var b,c=j.length;for(b=0;c>b;b++)if(j[b].id===a.id)return void j.splice(b,1)}var j=[],k={},l=!1;return c.$on("reload:data",f),{init:function(){l||(f(),l=!0)},groups:j,current:function(){return k},appendCurrentGroup:function(a){var b=k;return b&&b.id&&(a+="&group="+b.id),a},setCurrent:function(a){k=a?a:{}},removeSystem:h,removeSystems:function(a,c){var d=[];return angular.forEach(c,function(b){d.push(h(a,{machine_id:b}))}),b.all(d)},addSystems:function(b,c){return b.systems||(b.systems=[]),Array.prototype.push.apply(b.systems,c),a.put(d.API_ROOT+"groups/"+b.id+"/systems"+e.current(),c)},createGroup:function(b){return a.post(d.API_ROOT+"groups"+e.current(),b).success(function(a){b.display_name="",a.systems=[],j.push(a)})},deleteGroup:function(b){return i(b),a["delete"](d.API_ROOT+"groups/"+b.id+e.current())},reload:f}}]),angular.module("telemetryApi").factory("Messaging",["$http","CONFIG",function(a,b){function c(){var c=a.get(b.API_ROOT+"messaging/campaigns").success(function(a){d.length=0,Array.prototype.push.apply(d,a)});return c}var d=[],e=!1;return{campaigns:d,init:function(){e||(c(),e=!0)},savePrefs:function(){return a.post(b.API_ROOT+"messaging/users",d)}}}]),function(){var a={SU:"SU",INTERNAL:"INTERNAL",CREATE_ANNOUNCEMENT:"CREATE_ANNOUNCEMENT",CONTENT_MANAGER:"CONTENT_MANAGER"};angular.module("telemetryApi").factory("Permission",["$resource","CONFIG",function(a,b){var c=b.API_ROOT+"permissions/:permissionId",d={permissionId:"@id"},e=a(c,d);return e.init=function(){e.initial=e.query().$promise},e}]),angular.module("telemetryApp").factory("PermissionService",function(){function b(b,c){return b&&b.permissions?b.permissions[a.SU]?!0:b.permissions[c]?!0:!1:!1}return{has:b,PERMS:a}})}(),angular.module("telemetryApi").factory("Report",["$http","$rootScope","$window","CONFIG","Account","Group",function(a,b,c,d,e,f){var g,h;return b.$on("reload:data",function(){h=null,g=null}),{groupByHost:function(){return a.get(d.API_ROOT+"reports?accept=host"+e.current("&"))},exportReports:function(a){var b=(f.current(),d.API_ROOT+"reports?accept=csv"+e.current("&"));a&&(b+="&category="+a),b=f.appendCurrentGroup(b),c.location.assign(b)},countMap:function(b){if(h&&!b)return h;var c=d.API_ROOT+"reports?accept=countMap"+e.current("&");return c=f.appendCurrentGroup(c),h=a.get(c)},ruleReports:function(b,c){b=b.replace("|","!$");{var g=d.API_ROOT+"reports?rule_id="+b+e.current("&");f.current()}return g=f.appendCurrentGroup(g),c&&(g+="&"+c+"=true"),a.get(g)},groupByCount:function(){return g?g:g=a.get(d.API_ROOT+"reports?accept=count"+e.current("&"))}}}]),angular.module("telemetryApi").factory("Rule",["$http","CONFIG","Account",function(a,b,c){function d(a){return a.replace("|","!$")}return{plugins:function(){return a.get(b.API_ROOT+"rules?plugins=true")},summary:function(){return a.get(b.API_ROOT+"rules?summary=true"+c.current("&"))},admin:function(){return a.get(b.API_ROOT+"rules/admin?internal=true")},create:function(c){return a.post(b.API_ROOT+"rules?internal=true",c)},update:function(c){var e=d(c._rule_id||c.rule_id);return a.put(b.API_ROOT+"rules/"+e+"?internal=true",c)},"delete":function(c){var e=d(c.rule_id);return a["delete"](b.API_ROOT+"rules/"+e+"?internal=true")},preview:function(c,d){return a.post(b.API_ROOT+"rules/preview?internal=true",{rule:c,debug:d})},byId:function(c){return c=d(c),a.get(b.API_ROOT+"rules/"+c)}}}]),angular.module("telemetryApi").factory("System",["$http","$rootScope","CONFIG","Account","Group",function(a,b,c,d,e){function f(a){var b,c=h.length;for(b=0;c>b;b++)if(h[b].machine_id===a.machine_id)return void h.splice(b,1)}var g,h=[];return b.$on("reload:data",function(){g=null}),{getSystems:function(){return g?g:g=a.get(c.API_ROOT+"systems"+d.current())},getSystemSummary:function(){var b=c.API_ROOT+"systems?summary=true"+d.current("&"),f=e.current();return f&&f.id&&(b+="&group="+f.id),a.get(b)},getSystemReports:function(b){return a.get(c.API_ROOT+"systems/"+b+"/reports"+d.current())},deleteSystem:function(b){return f(b),a["delete"](c.API_ROOT+"systems/"+b.machine_id+d.current())}}}]),angular.module("telemetryApi").factory("Uploader",["$http","CONFIG",function(a,b){function c(){a.get(b.API_ROOT+"static/uploader.json").success(function(a){angular.extend(d,a)})}var d={},e=!1;return{init:function(){e||(c(),e=!0)},json:d}}]),angular.module("telemetryApi").factory("User",["$rootScope","$http","$q","Bounce","CONFIG",function(a,b,c,d,e){var f,g={loaded:!1};return e.authenticate&&(f=c.defer(),b.get(e.API_ROOT+"me").success(function(a){angular.extend(g,a),g.permissions=_.indexBy(g.permissions,"code"),g.loaded=!0,f.resolve(g)})),{current:g,asyncCurrent:function(a){return g&&g.loaded?a(g):void(f&&f.promise&&f.promise.then(a))}}}]).factory("Bounce",["CONFIG",function(a){return{bounce:function(){a.authenticate&&(window.location="/login?redirectTo="+window.location)}}}]),function(){angular.module("telemetryApi").factory("UserPermissions",["$resource","CONFIG",function(a,b){var c=b.API_ROOT+"user_permissions/:userPermissionId",d={userPermissionId:"@id"},e=a(c,d);return e.init=function(){e.initial=e.query().$promise},e}])}(),function(){angular.module("telemetryApp").controller("ListAnnouncementCtrl",["$scope","Announcement","User","PermissionService",function(a,b,c,d){function e(b){a.canCreate=b&&b.is_internal&&d.has(b,d.PERMS.CREATE_ANNOUNCEMENT)}a.announcements=b.announcements,a.canCreate=!1,c.asyncCurrent(e)}]).controller("ViewAnnouncementCtrl",["$scope","$stateParams","Announcement",function(a,b,c){c.bySlug(b.slug).then(function(b){a.announcement=b})}]).controller("EditAnnouncementCtrl",["$scope","$stateParams","Announcement",function(a,b,c){c.byId(b.id).then(function(b){a.announcement=b})}]).controller("NewAnnouncementCtrl",["$scope","$state","Announcement",function(a,b,c){a.announcement={hidden:!1},a.create=function(){c.createAnnouncement(a.announcement).success(function(){b.go("announcements")})}}])}(),angular.module("telemetryApp").controller("ConfigCtrl",["$scope","$state","$stateParams","Account",function(a,b,c,d){a.current={},c.tab?a.current[c.tab]=!0:a.current.hidden=!0,a.tabClick=function(a){b.go("config",{tab:a},{notify:!1})},a.isRHAccount=function(){return"540155"===d.number()}}]),angular.module("telemetryWidgets").controller("OverviewCtrl",["$scope","$stateParams","$state","$filter","RhaTelemetryOverviewService","Report","ActionbarService","OverviewBreadcrumbs","CONFIG",function(a,b,c,d,e,f,g,h,i){a.loading=e.loading,e.setCategory(b.category),e.setRule(null),e.setReportDetails(null),e.populateData(!0),h.init(b),i.allowExport&&g.add({fn:function(){f.exportReports(e.getCategory())},icon:"fa-download",title:"Export to CSV"})}]),angular.module("telemetryApp").controller("AdminRuleCtrl",["$scope","$state","$filter","$document","Rule","User","PermissionService","SweetAlert",function(a,b,c,d,e,f,g,h){function i(b){a.canDelete=b&&b.is_internal&&g.has(b,g.PERMS.CONTENT_MANAGER)}function j(){var b=l[a.tab];b&&b()}function k(a){e.create(a).success(function(a){b.go("edit-rule",{id:a.rule_id})})}a.predicate="count",a.reverse=!0,a.toggled=null,a.canDelete=!1,a.newRule={plugin:"",error_key:""},e.admin().success(function(b){a._rules=b}),f.asyncCurrent(i);var l={active:function(){a.records=c("filter")(a._rules,function(a){return a.active})},retired:function(){a.records=c("filter")(a._rules,function(a){return a.retired&&!a.needs_content})},inactive:function(){a.records=c("filter")(a._rules,function(a){return!a.active&&!a.retired&&!a.needs_content})},needs_content:function(){a.records=c("filter")(a._rules,function(a){return a.needs_content===!0})}};a.activateTab=function(b){a.tab=b,j()},a.tab="active",a.toggleTray=function(b){return a.toggled===b?void(a.toggled=null):void(a.toggled=b)},a.isToggled=function(b){return a.toggled===b},a.isTabActive=function(b){return _.includes(b,a.tab)},a.createRule=function(){k(a.newRule)},a.createRecord=function(a){k(a.rule)},a.deactivateRecord=function(a){var b=a.rule;b.active=a.active=!1,e.update(b)},a.activateRecord=function(a){var b=a.rule;b.active=a.active=!0,e.update(b)},a.unretireRecord=function(a){var b=a.rule;b.retired=a.retired=!1,e.update(b)},a.retireRecord=function(a){var b=a.rule;b.retired=a.retired=!0,e.update(b)},a.buttonGroupClass=function(b){return a.tab===b?"btn-default":"btn-secondary"},a.deleteRecord=function(b){function c(){e["delete"](d).then(function(){for(var b=0,c=a._rules.length;c>b;b++)if(a._rules[b].rule_id&&a._rules[b].rule_id===d.rule_id)return void a._rules.splice(b,1)})}var d=b.rule,f="Do you really want to delete <code>"+d.rule_id+"</code>?";b.count&&(f+="<br><br><strong>Note:</strong> This rule has hits. If deleted it will still show up in needs content."),h.swal({title:"Are you sure?",text:f,type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",html:!0,showCancelButton:!0},function(a){a&&c()})};var m=d.on("click",function(b){angular.element(b.target).closest(".utilities-tray").length||a.$apply(a.toggleTray.bind(a,null))});a.$watch("_rules",j,!0),a.$on("$destroy",function(){m.off("click")})}]),angular.module("telemetryApp").controller("EditRuleCtrl",["$scope","$stateParams","$state","Rule",function(a,b,c,d){d.byId(b.id).success(function(b){a.rule=b,a.rule._rule_id=b.rule_id}),a.saveFn=function(){d.update(a.rule).success(function(a){c.go("show-rule",{id:a.rule_id})})}}]),angular.module("telemetryWidgets").controller("ListRuleCtrl",["$scope","$filter","$location","smoothScroll","$timeout","Rule",function(a,b,c,d,e,f){function g(){var b=h[a.tab];b&&b()}a.categoryNames=["all","stability","performance","security"],a.tab="all",a.loading=!0,f.summary().success(function(b){a._rules=b,a.loading=!1;var f=c.hash();e(function(){d(f)},0)});var h={all:function(){a.rules=a._rules},performance:function(){a.rules=b("filter")(a._rules,function(a){return"Performance"===a.category})},stability:function(){a.rules=b("filter")(a._rules,function(a){return"Stability"===a.category})},security:function(){a.rules=b("filter")(a._rules,function(a){return"Security"===a.category})}};a.activateTab=function(b){a.tab=b,g()},a.buttonGroupClass=function(b){return a.tab===b?"btn-default":"btn-secondary"},a.$watch("_rules",g,!0),a.permalink=function(a){c.hash(a),d(a)},a.toggle=function(b){a.tab=b,g()},a.filterClass=function(b){return a.tab===b?"filter-on":void 0}}]),angular.module("telemetryApp").controller("NewRuleCtrl",["$scope","Rule",function(a,b){a.rule={severity:"INFO",category:"Stability"},a.saveFn=function(){b.create(a.rule).success(function(a){console.log("created rule",a)})}}]),angular.module("telemetryApp").controller("ShowRuleCtrl",["$scope","$state","$stateParams","Rule","RulePreview",function(a,b,c,d,e){d.byId(c.id).success(function(b){a.rule=b}),a.preview=e.preview,a.editInfo=function(a){b.go("edit-rule",{id:a.rule_id})}}]),angular.module("telemetryWidgets").controller("SystemCtrl",["$scope","$modal","System","CONFIG",function(a,b,c,d){function e(){return c.getSystemSummary().success(function(b){a.systems=b.systems,a.summary=b.summary,a.loading=!1})}a.loading=!0;var f;a.$on("reload:data",e),a.$on("group:change",e),e(),d.autoRefresh&&!isNaN(d.autoRefresh)&&(f=setInterval(e,parseInt(d.autoRefresh,10))),a.$on("$destroy",function(){f&&clearInterval(f)})}]),angular.module("telemetryTemplates",[]),function(){angular.module("telemetryApp").directive("accountSelect",["CONFIG",function(a){return{templateUrl:"components/accountSelect/accountSelect.html",restrict:"E",controller:["$scope","User","RhaTelemetryOverviewService",function(b,c,d){b.accountChange=function(c){c&&(window.sessionStorage.setItem(a.ACCT_KEY,c),b.$emit("account:change",c))},b.reset=function(){b.user&&(b.account_number=b.user.account_number,b.user.is_internal&&(b.account_number=""+b.user.account_number),b.accountChange(b.account_number))},c.asyncCurrent(function(){b.user=c.current;var e=window.sessionStorage.getItem(a.ACCT_KEY);b.user.is_internal&&e?(b.account_number=e,b.accountChange(e),d.populateData(!0)):b.account_number=b.user.account_number})}]}}])}(),angular.module("telemetryWidgets").directive("actionbar",function(){return{templateUrl:"components/actionbar/actionbar.html",restrict:"E",controller:["$scope","$rootScope","ActionbarService",function(a,b,c){a.actions=c.actions,b.$on("$stateChangeStart",function(){c.clear()})}]}}),angular.module("telemetryWidgets").factory("ActionbarService",function(){var a=[];return{actions:a,add:function(b){a.push(b)},set:function(b){a.length=0,Array.prototype.push.apply(a,b)},clear:function(){a.length=0}}}),angular.module("telemetryApp").factory("Analytics",["$http","CONFIG",function(a,b){return{pageLoad:function(){b.doPaf&&window.chrometwo_require&&window.chrometwo_require(["analytics/main","analytics/attributes"],function(a,b){a.init(["omniture"]),b.harvest(),a.report()})},clickEvent:function(){b.doPaf&&window.chrometwo_require&&window.chrometwo_require(["analytics/main"],function(){})}}}]),angular.module("telemetryApp").directive("bullhorn",function(){return{templateUrl:"components/bullhorn/bullhorn.html",restrict:"E",replace:!0,controller:["$scope","Announcement",function(a,b){b.init(),a.unseenFilter={seen:!1},a.announcements=b.announcements,a.unseen=b.unseen,a.showAnnouncements=!1,a.toggle=function(){a.showAnnouncements=!a.showAnnouncements},a.ack=b.acknowledge,a.$on("telemetry:esc",function(b){a.showAnnouncements&&(b.preventDefault(),a.$evalAsync(function(){a.toggle()}))})}]}}),angular.module("telemetryWidgets").constant("Categories",["availability","stability","performance","security"]),angular.module("telemetryApp").directive("configGroups",function(){return{templateUrl:"components/config/groups/groups.html",restrict:"EA",scope:!1,controller:["$scope","Group",function(a,b){b.init(),a.isCreating=!1,a.groups=b.groups}]}}),angular.module("telemetryApp").directive("configHidden",function(){return{templateUrl:"components/config/hidden/hidden.html",restrict:"EA",scope:{},controller:["$scope","Ack",function(a,b){b.init(),a.acks=b.acks,a["delete"]=b.deleteAck}]}}),angular.module("telemetryApp").directive("configMessaging",function(){return{templateUrl:"components/config/messaging/messaging.html",restrict:"EA",scope:{},controller:["$scope","Messaging",function(a,b){b.init(),a.campaigns=b.campaigns,a.save=function(a){b.savePrefs().then(function(){a.$setPristine()})}}]}}),angular.module("telemetryApp").directive("configPermissions",["$q","SweetAlert","UserPermissions","Permission","User",function(a,b,c,d,e){return{templateUrl:"components/config/permissions/permissions.html",restrict:"EA",scope:!1,controller:["$scope",function(f){var g={};f.newPermission={},g.swalConfig={title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0},g.removeAll=function(b){var d=[];b.forEach(function(a){d.push(c["delete"]({userPermissionId:a.id}).$promise)}),a.all(d)["finally"](function(){f.init()})},f.isCreating=!1,f.addNewPermission=function(){f.newPermission.permission_id=f.tmpPermission.id;var a=new c(f.newPermission);a.$save()["finally"](function(){f.init()})},f.removeSingle=function(a){f.removeAll([{id:a.id}])},f.removeAll=function(a){var c=g.swalConfig;a[0].sso_username===e.current.sso_username&&(c=JSON.parse(JSON.stringify(g.swalConfig)),c.text="Delete yourself?? Remember... no dumb here!"),b.swal(c,function(b){b&&g.removeAll(a)})},f.init=function(){d.query().$promise.then(function(a){f.permissions=a}),c.query().$promise.then(function(a){f.users=_.uniq(_.map(a,"sso_username")),f.userMap=_.groupBy(a,function(a){return a.sso_username})})},f.init()}]}}]),angular.module("telemetryApp").directive("configUploader",function(){return{templateUrl:"components/config/uploader/uploader.html",restrict:"EA",scope:!1,controller:["$scope","Uploader",function(a,b){b.init(),a.uploaderJson=b.json}]}}),angular.module("telemetryApp").directive("escKey",["$rootScope","$document",function(a,b){return{restrict:"AC",link:function(){b.on("keydown",function(b){27===b.keyCode&&a.$broadcast("telemetry:esc")})}}}]),angular.module("telemetryWidgets").filter("trust_html",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]).filter("titlecase",function(){function a(a){return a.toString().toLowerCase().replace(/\b([a-z])/g,function(a){return a.toUpperCase()})}return function(b){if(b=void 0===b||null===b?"":b,Array.isArray(b)){var c=[];return angular.forEach(b,function(b){c.push(a(b))}),c}return a(b)}}).filter("sortClass",function(){return function(a,b,c){return a?a!==b||c?a===b&&c?"sort-desc":"":"sort-asc":""}}).filter("orderObjectBy",function(){return function(a,b,c){var d=_.sortBy(a,b);return c?d.reverse():d}}).filter("offset",function(){return function(a,b){return b=parseInt(b,10),a?a.slice(b):[]}}),angular.module("telemetryApp").directive("groupForm",function(){return{templateUrl:"components/group/views/form.html",restrict:"EC",controller:["$scope","Group",function(a,b){a.create=function(c){a.isCreating=!0,b.createGroup(c).success(function(){a.isCreating=!1}),a.newGroup={display_name:""}},a.newGroup={display_name:""}}]}}).directive("group",function(){return{templateUrl:"components/group/views/group.html",restrict:"E",controller:["$scope","SweetAlert","Group",function(a,b,c){a.isCollapsed=!1,a.deleteGroup=function(a){b.swal({title:"Are you sure?",text:"You will not be able to recover this group!",type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",showCancelButton:!0},function(b){b&&c.deleteGroup(a)})}}]}}),angular.module("telemetryApp").directive("groupSelect",function(){return{templateUrl:"components/groupSelect/groupSelect.html",restrict:"E",replace:!0,controller:["$scope","Group",function(a,b){function c(c){b.setCurrent(c),a.$emit("group:change",c)}b.init(),a.groups=b.groups,a.group=b.current(),a.groupChange=function(){c(a.group)},a.$on("account:change",function(){c(null)})}]}}),angular.module("telemetryWidgets").directive("ngIndeterminate",["$compile",function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.ngIndeterminate,function(a){b.prop("indeterminate",!!a)})}}}]),angular.module("telemetryWidgets").directive("rhaTelemetryOverview",function(){return{templateUrl:"components/overview/overview.html",restrict:"E",replace:!0,scope:{},controller:["$scope","RhaTelemetryOverviewService",function(a,b){a.loading=b.loading,a.getData=b.getData,a.getTotal=b.getTotal,a.getRule=b.getRule,a.ackAction=b.ackAction,a.arcClick=b.arcClick,a.reload=b.reload,a.isOverview=b.isOverview,a.getCategory=b.getCategory}]}}),angular.module("telemetryWidgets").factory("RhaTelemetryOverviewService",["$state","$q","$rootScope","Report","Ack","CONFIG","Categories","Severities",function(a,b,c,d,e,f,g,h){var i={},j={},k=[],l=0,m=null,n=[],o=!1,p=h,q={},r=null,s=null,t=!1,u=null,v=null,w=!1,x=g;angular.forEach(p,function(a){q[a]=!0});var y=function(a){return q[a.rule.severity]},z=function(){return s?!1:!0},A=function(a){return e.ackMap[a.rule.rule_id]},B=function(a){return j[a]&&j[a].name?j[a].name:a},C=function(){var a=_.reject(n,A);E(a),a=_.filter(a,y),z()?(j=_(a).groupBy(function(a){return a.rule.category}).map(function(a,b){var c=_.reduce(a,function(a,b){return a+b.count},0);return{id:b,name:b,value:c,category:!0}}).indexBy("id").value(),L(j)):(j=_(a).filter(function(a){return a.rule.category.toLowerCase()===s.toLowerCase()}).map(function(a){return{id:a.rule.rule_id,name:a.rule.description,severityNum:_.indexOf(p,a.rule.severity),severity:a.rule.severity,category:a.rule.category,value:a.count,color:""}}).indexBy("id").value(),L(j)),l=_.reduce(j,function(a,b){return a+b.value},0),P(l),c.$broadcast("rha-telemetry-refreshdonut"),c.$on("group:change",I),c.$on("account:change",I)},D=function(a){if(t){var c=b(function(a){a("norefresh")});return c.then(function(){C()}),c}o=!0;var f=d.countMap(a),g=e.reload();return g.then(f),f.success(function(a){O(a),C()}),f["finally"](function(){o=!1,t=!0}),f},E=function(a){var b={security:0,stability:0,performance:0};_(a).groupBy(function(a){return a.rule.category}).reduce(function(a,b,c){return a[c.toLowerCase()]=_.reduce(b,function(a,b){return a+b.count},0),a},b),cb(b)},F=function(b){return b.category===!0?a.go("overview",{category:b.id.toLowerCase()}):void a.go("overview-rule",{category:b.category.toLowerCase(),rule:b.id})},G=function(a){e.createAck(a).then(C)},H=function(){return Z(!0),d.ruleReports(T()).success(function(a){if(!a||!a.length)return u=null,void(v=null);var b=a[0];v=b.rule,u=a,Z(!1)})},I=function(){t&&(Y(!1),D(!0).then(function(){a.reload()}))},J=function(){return l},K=function(){return j},L=function(a){j=a},M=function(){return r},N=function(a){r=a},O=function(a){n=a},P=function(a){l=a},Q=function(){return s},R=function(a){s=a},S=function(a){m=a},T=function(){return m},U=function(a){v=a},V=function(){return v},W=function(a){u=a},X=function(){return u},Y=function(a){t=a},Z=function(a){w=a},$=function(){return w},ab=function(){return x},bb=function(){return i},cb=function(a){i=a},db=function(){return k},eb=function(a){k=a};return f.autoRefresh&&!isNaN(f.autoRefresh)&&setInterval(I,parseInt(f.autoRefresh,10)),{isOverview:z,ackFilter:A,severityFilter:y,getTotal:J,getData:K,processReports:C,populateData:D,updateCounts:E,arcClick:F,mapName:B,ackAction:G,getCounts:bb,setCounts:cb,data:j,total:l,rule:m,reports:n,loading:o,severityNames:p,severities:q,donutChart:r,category:s,dataLoaded:t,setDonutChart:N,setCategory:R,getDonutChart:M,getRule:T,setRule:S,getCategory:Q,reportDetails:u,setReportDetails:W,getReportDetails:X,setRuleDetails:U,getRuleDetails:V,populateDetails:H,setLoadingDetails:Z,getLoadingDetails:$,reload:I,setDataLoaded:Y,getCategories:ab,getOldCols:db,setOldCols:eb}}]),angular.module("telemetryWidgets").directive("overviewBack",function(){return{templateUrl:"components/overview/overviewBack/overviewBack.html",restrict:"EC",scope:{},controller:["$scope","$state","$stateParams","RhaTelemetryOverviewService",function(a,b,c,d){a.isOverview=d.isOverview,c.category&&c.rule&&(a.category=c.category),a.goBack=function(){var a={category:null};c.category&&c.rule&&(a.category=c.category),b.go("overview",a)},a.$on("telemetry:esc",function(b){b.defaultPrevented||a.goBack()})}]}}),angular.module("telemetryWidgets").directive("overviewBreadcrumbs",function(){return{templateUrl:"components/overview/overviewBreadcrumbs/overviewBreadcrumbs.html",restrict:"E",controller:["$scope","$state","OverviewBreadcrumbs",function(a,b,c){a.crumbs=c.get(),a.crumbClick=function(a){b.go(a.state,a.params)}}]}}),angular.module("telemetryWidgets").factory("OverviewBreadcrumbs",["$filter","RhaTelemetryOverviewService",function(a){function b(a){return d.length=0,Array.prototype.push.apply(d,a),d}function c(a){d.push(a)}var d=[];return{init:function(c){var d=[{label:"Overview",state:"overview",params:{category:null}}];c.category&&d.push({label:a("titlecase")(c.category),state:"overview",params:{category:c.category}}),b(d)},get:function(){return d},set:b,add:c}}]),angular.module("telemetryWidgets").directive("overviewDetails",function(){return{templateUrl:"components/overview/overviewDetails/overviewDetails.html",restrict:"EC",scope:{},controller:["$scope","$location","RhaTelemetryOverviewService",function(a,b,c){b.search();a.getTotal=c.getTotal,a.isOverview=c.isOverview,a.getReportDetails=c.getReportDetails,a.getRuleDetails=c.getRuleDetails,a.getLoadingDetails=c.getLoadingDetails,a.getData=c.getData,a.getRule=c.getRule,a.arcClick=c.arcClick,a.ackAction=c.ackAction,a.isOverview=c.isOverview,a.getTitle=function(){var a=c.isOverview()?"Overview":c.getCategory();return a}}]}}),angular.module("telemetryWidgets").controller("OverviewRuleCtrl",["$scope","$stateParams","$modal","$location","RhaTelemetryOverviewService","OverviewBreadcrumbs",function(a,b,c,d,e,f){function g(){var b=d.search(),c=b.machine;if(c){var e=a.getReportDetails(),f=_.findWhere(e,{machine_id:c});if(f&&f.system)return a.showSystem(f.system);d.replace(),d.search("machine",null)}}var h=b.category;e.setCategory(h),e.setRuleDetails(null),e.setRule(b.rule),a.getReportDetails=e.getReportDetails,a.getRuleDetails=e.getRuleDetails,a.loading=!0,e.populateDetails(!0)["finally"](function(){a.loading=!1,g()}),a.filters={system:{hostname:""}},f.init(b),a.ruleDetails={};var i=a.$watch(function(){return e.getRuleDetails()},function(c){c&&(a.ruleDetails=c,f.add({label:c.description,params:{category:b.category,rule:c.rule_id}}),i())});a.showSystem=function(a){c.open({templateUrl:"components/system/systemModal/systemModal.html",windowClass:"system-modal",backdropClass:"system-backdrop",controller:"SystemModalCtrl",resolve:{system:function(){return a},rule:function(){return!1}}})}}]),function(){var a={};angular.module("telemetryWidgets").directive("recommendedKbase",function(){return{scope:{node:"="},templateUrl:"components/recommendedKbase/recommendedKbase.html",restrict:"EC",controller:["$scope","$http",function(b,c){b.loading=!1,b.node&&(a[b.node]?b.solution=a[b.node]:(b.loading=!0,c.get("/rs/search?keyword=id:"+b.node,{headers:{"Content-Type":"application/json",Accept:"application/json","X-Omit":"WWW-Authenticate"}}).success(function(c){b.loading=!1;
var d;c&&c.searchResult&&c.searchResult.length?d=c.searchResult[0]:c&&c.search_result&&c.search_result.length&&(d=c.search_result[0]),d&&(b.solution=d,b.solution.viewUri=b.solution.viewUri||b.solution.view_uri,a[b.node]={title:b.solution.title,viewUri:b.solution.viewUri})})["catch"](function(){b.loading=!1})))}]}})}(),function(){function a(a){return c3.generate({bindto:".rha-telemetry-donut",size:{width:260,height:260},pie:{label:{threshold:.07}},data:{columns:[],colors:{Performance:"#2c96cb",Security:"#6d868d",Stability:"#46b631"},type:"pie"},legend:{show:!1},tooltip:{format:{name:a,value:function(a,b){if(b>=.07)return a;var c=d3.format("0.3p");return a+" ("+c(b)+")"}}}})}angular.module("telemetryWidgets").directive("rhaTelemetryDonut",["$state","$timeout","RhaTelemetryOverviewService",function(b,c,d){return{restrict:"C",replace:!0,link:function(b){d.setDonutChart(a(d.mapName));var c=function(){function a(a){var b=a.replace(/[|._]/g,"-");return".c3-arc-"+b}function b(a){return!a.hasOwnProperty("visible")||a.visible}function c(a){return _.values(a).filter(b).map(function(a){return[a.id,a.value]})}var e=d.getDonutChart(),f=d.getData,g=c(f()),h=d.getOldCols();d.setOldCols(f());var i=_.keys(h).filter(function(a){return!f().hasOwnProperty(a)||!b(f()[a])});e.load({columns:g,unload:i,done:function(){angular.forEach(e.data(),function(b){var c=f()[b.id],e=a(c.id),g=angular.element(e),h=g.css("fill");c.color=h,g.on("click",function(){d.arcClick(c)})})}})};b.$on("rha-telemetry-refreshdonut",c),b.$watch(d.getData(),c)}}}])}(),angular.module("telemetryApp").directive("ruleForm",function(){return{templateUrl:"components/rule/ruleForm/ruleForm.html",restrict:"E",controller:["$scope","Categories","Severities","RulePreview",function(a,b,c,d){function e(){a.rule&&(a.rule.rule_id=(a.rule.plugin||"")+"|"+(a.rule.error_key||""))}a.locked=!0,a.severities=c,a.categories=b,a.preview=d.preview,a.toggleLock=function(){a.locked=!a.locked},a.$watch("rule.plugin",e),a.$watch("rule.error_key",e)}]}}),angular.module("telemetryApp").directive("rulePlugin",function(){return{templateUrl:"components/rule/rulePlugin/rulePlugin.html",restrict:"E",controller:["$scope","Rule",function(a,b){a.plugins=[],a.config={valueField:"item",labelField:"item",searchField:"item",create:!0},b.plugins().success(function(b){a.plugins=_.map(b,function(a){return{item:a}})})}]}}),angular.module("telemetryApp").factory("RulePreview",["$http","$modal",function(a,b){return{preview:function(a){b.open({templateUrl:"components/system/systemModal/systemModal.html",windowClass:"system-modal",backdropClass:"system-backdrop",controller:"SystemModalCtrl",resolve:{rule:function(){return a},system:function(){return!1}}})}}}]),angular.module("telemetryWidgets").directive("ruleReason",function(){return{templateUrl:"components/rule/ruleReason/ruleReason.html",restrict:"EC"}}),angular.module("telemetryWidgets").directive("ruleResolution",function(){return{templateUrl:"components/rule/ruleResolution/ruleResolution.html",restrict:"EC",replace:!0}}),function(){angular.module("telemetryWidgets").directive("ruleSummaries",function(){return{controller:"RuleSummariesCtrl",templateUrl:"components/rule/ruleSummaries/ruleSummaries.html",restrict:"EC",scope:{system:"=",machineId:"=",rule:"=",ruleFilter:"=",loading:"="}}}).controller("RuleSummariesCtrl",["$scope","$stateParams","$location","System","Report",function(a,b,c,d){function e(){a.loading.isLoading=!0,d.getSystemReports(a.machineId).success(function(b){angular.extend(a.system,b),a.rule_id&&a.system.reports.sort(function(b,c){return b.rule_id===a.rule_id?-1:c.rule_id===a.rule_id?1:0}),a.loading.isLoading=!1})}function f(a){c.replace(),c.search("machine",a)}a.allExpanded=!1,a.expandAll=function(){a.$broadcast("telemetry:toggleCollapse",a.allExpanded),a.allExpanded=!a.allExpanded},a.rule_id=b.rule,a.machineId&&!a.system.__fake&&(a.rule_id&&(a.ruleFilter=!0),a.system&&(a.system.reports&&(a.allExpanded=!0),a.system.reports=[],e())),f(a.machineId)}])}(),function(){angular.module("telemetryWidgets").directive("ruleSummary",function(){return{controller:"RuleSummaryCtrl",templateUrl:"components/rule/ruleSummary/ruleSummary.html",restrict:"EC",scope:{report:"=",rule:"=",ruleId:"=",ruleFilter:"=",loading:"="}}}).controller("RuleSummaryCtrl",["$scope","Rule","Report",function(a,b,c){function d(){a.showMoreInfo&&a.isCollapsed&&(a.showMoreInfo=!1)}a.debug=!1,a.showMoreInfo=!1,a.isCollapsed=!1,a.invalidJSON=!0,a.noReports=!1,a.ruleFilter&&a.ruleId&&a.ruleId!==a.report.rule_id&&(a.isCollapsed=!0),a.$on("telemetry:toggleCollapse",function(b,c){a.isCollapsed=c,d()}),a.buildPreview=function(c){return b.preview(a.rule,c).success(function(b){a.system=b;var c=b.reports[0];a.debug.machine_id=c.machine_id,a.debug.uuid=c.uuid,c.machine_id&&c.uuid||(a.noReports=!0),a.report=c,a.loading.isLoading=!1})},a.validatePydata=function(b){try{JSON.parse(b),a.invalidJSON=!1}catch(c){a.invalidJSON=!0}},a.toggleCollapse=function(){a.isCollapsed=!a.isCollapsed,d()},a.rule&&(a.debug={},a.buildPreview(),c.ruleReports(a.rule.rule_id,"machines").success(function(b){a.machines=b}),c.ruleReports(a.rule.rule_id,"uuids").success(function(b){a.uuids=b}))}])}(),angular.module("telemetryWidgets").directive("ruleToggle",function(){return{templateUrl:"components/rule/ruleToggle/ruleToggle.html",restrict:"E",scope:{rule:"="},controller:["$scope","Ack",function(a,b){function c(){a.text="Permanently Ignore Rule",a.rule&&a.rule.acks&&a.rule.acks.length&&(a.text="Unignore Rule")}a.ackAction=function(){if(a.rule&&a.rule.acks&&a.rule.acks.length){var c=a.rule.acks.pop();b.deleteAck(c)}else b.createAck(a.rule).then(function(b){a.rule.acks.push(b)})},c(),a.$watch("rule.acks.length",c)}]}}),angular.module("telemetryWidgets").constant("Severities",["All","INFO","WARN","ERROR"]),angular.module("telemetryWidgets").directive("severityBar",function(){return{templateUrl:"components/severityBar/severityBar.html",restrict:"EC",controller:["$scope","RhaTelemetryOverviewService",function(a,b){a.barClass="",a.severityNames=b.severityNames,a.severities=b.severities,a.toggle=function(c){var d=!1;"All"===c&&(d=!0);for(var e in a.severities)a.severities[e]=d;a.severities[c]=!0,b.processReports()},a.filterClass=function(b){return"All"===b&&a.severities[b]?"filter-on":a.severities[b]&&!a.severities.All?"filter-on":void 0}}]}}),angular.module("telemetryWidgets").directive("severityIcon",function(){return{scope:{severity:"="},templateUrl:"components/severityIcon/severityIcon.html",restrict:"EC",replace:!0,controller:["$scope",function(a){a.severityClass="","INFO"===a.severity?a.severityClass="i-info fa-info-circle":"WARN"===a.severity?a.severityClass="i-warning fa-warning":"ERROR"===a.severity&&(a.severityClass="i-error fa-times-circle")}]}}),angular.module("telemetryWidgets").directive("rhaTelemetryOverviewSideNav",function(){return{templateUrl:"components/sideNav/overviewSideNav/overviewSideNav.html",restrict:"E",replace:!0,controller:["$scope","$state","$stateParams","RhaTelemetryOverviewService","Categories",function(a,b,c,d,e){a.categories=e,a.getCounts=d.getCounts,a.overview=!1,a.isActive=function(b){return a.overview&&c.category===b},a.$watch(function(){return b.current&&b.current.overview},function(b){a.overview=b})}]}}),angular.module("telemetryApp").directive("sideNav",function(){return{templateUrl:"components/sideNav/sideNav.html",restrict:"E",replace:!0}}),angular.module("telemetryWidgets").factory("smoothScroll",function(){function a(a){for(var b=a.offsetTop,c=a;c.offsetParent&&c.offsetParent!==document.body;)c=c.offsetParent,b+=c.offsetTop;return b-=20}function b(a,b,c){setTimeout(window.scrollTo,a*b,0,c)}return function(c){var d=document.getElementById(c);if(d){var e,f=window.pageYOffset||0,g=a(d),h=g>f?g-f:f-g;if(100>h)return void scrollTo(0,g);var i=18,j=Math.round(h/25),k=g>f?f+j:f-j,l=0;if(g>f)for(e=f;g>e;e+=j)b(l,i,k),k+=j,k>g&&(k=g),l++;else for(e=f;e>g;e-=j)b(l,i,k),k-=j,g>k&&(k=g,l++)}}}),function(){angular.module("telemetryWidgets").controller("SystemModalCtrl",["$scope","$rootScope","$location","$modalInstance","System","Rule","system","rule",function(a,b,c,d,e,f,g,h){function i(){d.dismiss("close")}function j(a){c.replace(),c.search("machine",a)}a.system=g,a.rule=h,a.loading={isLoading:!1};var k,l;g===!1&&(a.system={hostname:"this.is.a.fake.system",machine_id:"fakemachineidfakemachineidfakemachineid",__fake:!0}),a.close=i,d.result.then(angular.noop,function(){j(null),l(),k()}),j(a.system.machine_id),k=b.$on("$stateChangeStart",i),l=b.$on("telemetry:esc",function(a){return a.preventDefault(),!1}),a.$on("destroy",function(){k(),l()})}])}(),angular.module("telemetryWidgets").directive("systemSummaryTable",function(){return{templateUrl:"components/system/systemSummaryTable/systemSummaryTable.html",restrict:"EC",scope:{systems:"=",doFetch:"="},controller:["$scope","$filter","$modal","$location","System","NgTableParams","SweetAlert",function(a,b,c,d,e,f,g){function h(){var a=d.search();if(a.sort){var b={sorting:{}};return b.sorting[a.sort]=a.dir||"desc",b}}function i(a){if(a&&a.length){if(a=a[0].split(n),3!==a.length)return;var b={sort:a[2],dir:"+"===a[1]?"asc":"desc"},c=d.search();d.replace(),c.machine&&(b.machine=c.machine),d.search(b)}}function j(){var b=d.search(),c=b.machine;if(c){var e=_.findWhere(m,{machine_id:c});if(e)return a.showSystem(e);d.replace(),d.search("machine",null)}}var k=new Date;k.setDate(k.getDate()-8);var l=new Date;l.setDate(l.getDate()-30);var m=a.systems||[],n=/(\+|-)/;a.filters={hostname:""};var o=null,p=angular.extend({page:1,count:75,filter:a.filters,sorting:{last_check_in:"desc"}},h());a.tableParams=new f(p,{total:m.length,counts:[],getData:function(a,c){i(c.orderBy());var d=c.filter()?b("filter")(m,c.filter().hostname):m;d=c.sorting()?b("orderBy")(d,c.orderBy()):d,a.resolve(d.slice((c.page()-1)*c.count(),c.page()*c.count()))}}),a.isStale=function(a){var b=new Date(a);return b>l&&k>b},a.isReallyStale=function(a){return new Date(a)<l},a.$watch("systems",function(b){b&&(m=b,a.tableParams.total(m.length),a.tableParams.reload(),b.length&&j())}),a.doFetch&&(a.loading=!0,e.getSystemSummary().success(function(b){a.systems=b.systems,a.summary=b.summary,a.loading=!1})),a.showSystem=function(a){o||(o=c.open({templateUrl:"components/system/systemModal/systemModal.html",windowClass:"system-modal",backdropClass:"system-backdrop",controller:"SystemModalCtrl",resolve:{system:function(){return a},rule:function(){return!1}}}),o.result["finally"](function(){o=null}))},a.unregister=function(b){var c="this system";b&&b.hostname&&(c="<code>"+b.hostname+"</code>"),g.swal({title:"Are you sure?",text:"This will unregister "+c+" from Red Hat Access Insights.",type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",html:!0,showCancelButton:!0},function(c){if(c){e.deleteSystem(b);var d,f=m.length;for(d=0;f>d;d++)if(m[d].machine_id===b.machine_id)return m.splice(d,1),void a.tableParams.reload()}})},a.actionTooltip=function(a){return 1===a?"1 Action":a+" Actions"}}]}}),angular.module("telemetryApp").directive("systemTable",function(){return{templateUrl:"components/system/systemTable/systemTable.html",restrict:"E",scope:{group:"=",type:"@"},controller:["$scope","System","Group","$filter",function(a,b,c,d){function e(){if(i&&i.length){var b=_.indexBy(a.group.systems,"machine_id");a.systems=_.reject(i,function(a){return!!b[a.machine_id]}),b=null,a.filterSystems()}}function f(){if(!a._filteredSystems||!a._filteredSystems.length)return a.checkboxes.checked=!1,a.totalChecked=0,void(a.indeterminate=!1);var b=0,c=0,d=a._filteredSystems.length;angular.forEach(a._filteredSystems,function(d){b+=a.checkboxes.items[d.machine_id]||0,c+=!a.checkboxes.items[d.machine_id]||0}),(0===c||0===b)&&(a.checkboxes.checked=b===d),a.totalChecked=b,a.indeterminate=0!==b&&0!==c}function g(){a.checkboxes.checked=!1,a.checkboxes.items={}}function h(b,c){var d=angular.element(b.parentElement).children(),e=d.index(b),f=d.index(c);angular.forEach(d.slice(Math.min(e,f),Math.max(e,f)+1),function(b){var c=b.getAttribute("data-machine_id");a.checkboxes.items[c]=!0})}var i,j,k=!1,l=a.type;a._filteredSystems=[],a.indeterminate=!1,a.items=[10,25,50,100],a.itemsPerPage=10,a.title="in"===l?"Systems in This Group":"Available Systems",a.currentPage=1,a.total=0,a.loading=!1,a.maxPages=4,a.systemFilter="",a.checkboxes={checked:!1,items:{}},a.filterSystems=function(){a.filteredSystems=d("filter")(a.systems,{hostname:a.systemsFilter}),a.total=a.filteredSystems.length},a.addSystems=function(){var b=[],d=_.indexBy(a._filteredSystems,"machine_id");for(var e in a.checkboxes.items)a.checkboxes.items[e]&&d[e]&&b.push(d[e]);c.addSystems(a.group,b),g()},a.removeSystems=function(){var b=[];for(var d in a.checkboxes.items)a.checkboxes.items[d]&&b.push(d);c.removeSystems(a.group,b),g()},a.rowClick=function(a){return a.shiftKey&&"mousedown"===a.type?(a.preventDefault(),!1):j?(a.shiftKey&&h(a.delegateTarget,j),void(j=a.delegateTarget)):void(j=a.delegateTarget)},"in"===l?(a.systems=a.group.systems,a.filterSystems(),a.$watch("group.systems",function(){a.filterSystems()},!0)):(a.loading=!0,b.getSystems().success(function(b){a.loading=!1,i=b,e()}),a.$watch("group.systems",e,!0)),a.$watch("checkboxes.checked",function(b){k||angular.forEach(a._filteredSystems,function(c){angular.isDefined(c.machine_id)&&(a.checkboxes.items[c.machine_id]=b)})}),a.$watch("checkboxes.items",f,!0),a.pageChanged=g}]}}),angular.module("telemetryWidgets").directive("targetBlank",["$timeout",function(a){function b(a){for(var b=a.querySelectorAll("a"),c=0;c<b.length;c++)b[c].target="_blank"}return{link:function(c,d){a(function(){d&&d[0]&&b(d[0])},0,!1)}}}]),angular.module("telemetryApp").directive("topbar",function(){return{templateUrl:"components/topbar/topbar.html",restrict:"E",replace:!0,controller:["$scope","$state",function(){}]}}),angular.module("telemetryApp").directive("yesNo",function(){return{scope:{yes:"=",no:"=",text:"@"},templateUrl:"components/yesNo/yesNo.html",restrict:"EC"}}),angular.module("telemetryTemplates").run(["$templateCache",function(a){a.put("app/announcements/announcements.html",'\n<div class="page-standard page-announcements section-announcements">\n  <div class="row">\n    <div class="col-xs-12">\n      <h1 class="page-title">Announcements</h1>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-xs-12">\n      <table class="table table-striped">\n        <thead>\n          <tr>\n            <th>Message</th>\n            <th>Date</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="a in announcements">\n            <td><span ng-hide="a.slug &amp;&amp; a.details">{{a.message}}</span><a ng-show="a.slug &amp;&amp; a.details" ui-sref="view-announcement({slug: a.slug})">{{a.message}}</a></td>\n            <td>{{a.created_at | date}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div class="row row-short">\n    <div class="col-xs-12"><a ui-sref="new-announcement" ng-show="canCreate" class="pull-right btn btn-app">Create Announcement</a></div>\n  </div>\n</div>'),a.put("app/announcements/new-announcement.html",'\n<div class="page-standard page-announcements section-announcements">\n  <div class="row">\n    <div class="col-xs-12">\n      <h1 class="page-title">New Announcement</h1>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-xs-12 col-m-8">\n      <form ng-submit="create()" name="form" class="form-horizontal">\n        <fieldset>\n          <div class="row">\n            <div class="col-xs-12">\n              <label class="control-label">Message</label>\n              <input ng-model="announcement.message" type="text" placeholder="Announcement Message" required="required" class="form-control"/>\n            </div>\n          </div>\n          <div class="row row-short">\n            <div class="col-xs-12">\n              <label class="control-label">Slug</label>\n              <input ng-model="announcement.slug" type="text" placeholder="Slug" required="required" class="form-control"/>\n            </div>\n          </div>\n          <div class="row row-short">\n            <div class="col-xs-12">\n              <label class="control-label">Details</label>\n              <textarea ng-model="announcement.details" type="text" placeholder="Details" required="required" class="form-control"></textarea>\n            </div>\n          </div>\n          <div class="row row-short">\n            <div class="col-xs-12">\n              <label class="checkbox-inline">\n                <input type="checkbox" name="hidden" value="true" ng-model="announcement.hidden"/>&nbsp;\n              </label>\n              <label for="hidden" class="control-label">Hidden</label>\n            </div>\n          </div>\n          <div class="row">\n            <div class="col-xs-12">\n              <button name="submit" ng-disabled="form.$error.required" class="btn btn-app pull-right">Create Announcement</button>\n            </div>\n          </div>\n        </fieldset>\n      </form>\n    </div>\n  </div>\n</div>'),a.put("app/announcements/view-announcement.html",'\n<div class="page-standard page-announcements section-announcements">\n  <div class="row">\n    <div class="col-xs-12"><strong class="pull-right">{{announcement.created_at | date}}</strong>\n      <h1 class="page-title">{{announcement.message}}</h1>\n    </div>\n  </div>\n  <div class="row push-top border-top">\n    <div class="col-xs-12">\n      <div ng-bind-html="announcement.details_html | trust_html" target-blank=""></div>\n    </div>\n  </div>\n</div>'),a.put("app/config/views/config.html",'\n<tabset class="config-tabs">\n  <tab heading="Hidden Rules" active="current.hidden" ng-click="tabClick(\'hidden\')">\n    <config-hidden ng-if="current.hidden"></config-hidden>\n  </tab>\n  <tab heading="Groups" active="current.groups" ng-click="tabClick(\'groups\')">\n    <config-groups ng-if="current.groups"></config-groups>\n  </tab>\n  <tab heading="Messaging" active="current.messaging" ng-click="tabClick(\'messaging\')">\n    <config-messaging ng-if="current.messaging"></config-messaging>\n  </tab>\n  <tab heading="Uploader" active="current.uploader" ng-click="tabClick(\'uploader\')" class="hidden">\n    <config-uploader ng-if="current.uploader"></config-uploader>\n  </tab>\n  <tab heading="Permissions" active="current.permissions" ng-click="tabClick(\'permissions\')" ng-show="user.is_internal &amp;&amp; isRHAccount()">\n    <config-permissions ng-if="current.permissions"></config-permissions>\n  </tab>\n</tabset>'),a.put("app/overview/overview.html",'\n<div class="row">\n  <div class="col-md-6 col-lg-5 chart-col">\n    <rha-telemetry-overview></rha-telemetry-overview>\n  </div>\n  <div ng-hide="loading" class="col-md-6 col-lg-7">\n    <div class="overview-details"></div>\n  </div>\n</div>'),a.put("app/pages/views/403.html",'\n<div class="page">\n  <section>\n    <h1><i class="fa fa-lock"></i> 403 <small> Forbidden</small></h1>\n  </section>\n</div>'),a.put("app/rules/views/admin-rules.html",'\n<div class="page">\n  <div class="section">\n    <div class="row">\n      <div class="col-sm-6">\n        <h1 class="page-title">Rules</h1>\n        <div class="btn-group">\n          <button ng-class="buttonGroupClass(\'active\')" ng-click="activateTab(\'active\')" type="button" class="btn btn-sm">Active</button>\n          <button ng-class="buttonGroupClass(\'needs_content\')" ng-click="activateTab(\'needs_content\')" type="button" class="btn btn-sm">Needs Content</button>\n          <button ng-class="buttonGroupClass(\'inactive\')" ng-click="activateTab(\'inactive\')" type="button" class="btn btn-sm">Inactive</button>\n          <button ng-class="buttonGroupClass(\'retired\')" ng-click="activateTab(\'retired\')" type="button" class="btn btn-sm">Retired</button>\n        </div>\n      </div>\n      <div ng-if="!loading" style="margin-bottom: 10px" class="col-sm-6 ng-cloak">\n        <div class="create-error">\n          <h3>Create Rule</h3>\n          <div class="field-group">\n            <label>Plugin</label>\n            <input ng-model="newRule.plugin"/>\n          </div>\n          <div class="field-group">\n            <label>Rule Key</label>\n            <input ng-model="newRule.error_key"/>\n            <button ng-click="createRule(newRule)" ng-disabled="!newRule.plugin || !newRule.error_key" class="btn btn-link pull-right">+ Add Rule</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <table ng-if="!loading" class="table table-striped table-bordered ng-table error-infos">\n    <thead>\n      <tr>\n        <th ng-class="predicate | sortClass:\'rule.error_key\':reverse" ng-click="predicate = \'rule.error_key\'; reverse=!reverse" class="sortable key">\n          <div>Rule key</div>\n        </th>\n        <th ng-class="predicate | sortClass:\'rule.plugin\':reverse" ng-click="predicate = \'rule.plugin\'; reverse=!reverse" class="sortable plugin">\n          <div>Plugin</div>\n        </th>\n        <th ng-class="predicate | sortClass:\'rule.category\':reverse" ng-click="predicate = \'rule.category\'; reverse=!reverse" class="sortable cat">\n          <div>Category</div>\n        </th>\n        <th ng-class="predicate | sortClass:\'rule.severity\':reverse" ng-click="predicate = \'rule.severity\'; reverse=!reverse" class="sortable sev">\n          <div>Severity</div>\n        </th>\n        <th ng-class="predicate | sortClass:\'count\':reverse" ng-click="predicate = \'count\'; reverse=!reverse" class="sortable count">\n          <div>Count</div>\n        </th>\n        <th ng-class="predicate | sortClass:\'rule.description\':reverse" ng-click="predicate = \'rule.description\'; reverse=!reverse" class="sortable desc">\n          <div>Description</div>\n        </th>\n        <th></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="record in records | orderBy:predicate:reverse" class="ng-cloak">\n        <td class="key">{{record.rule.error_key}}</td>\n        <td class="plugin">{{record.rule.plugin}}</td>\n        <td class="cat">{{record.rule.category}}</td>\n        <td class="sev">{{record.rule.severity}}</td>\n        <td class="count">{{record.count}}</td>\n        <td class="desc">{{record.rule.description}}</td>\n        <td class="util">\n          <div class="td-wrap">\n            <div class="utilities-tray"><i ng-click="toggleTray(record)" class="fa fa-cogs"></i>\n              <div ng-show="isToggled(record)" class="tray"><a ui-sref="show-rule({id: record.rule_id})" ng-if="isTabActive([\'active\', \'inactive\', \'retired\'])">Show</a><a ui-sref="edit-rule({id: record.rule_id})" ng-if="isTabActive([\'active\', \'inactive\', \'retired\'])">Edit</a><a ng-click="createRecord(record)" ng-if="isTabActive([\'needs_content\'])">Add Content</a><a ng-click="deactivateRecord(record)" ng-if="isTabActive([\'active\'])">Deactivate</a><a ng-click="activateRecord(record)" ng-if="isTabActive([\'inactive\'])">Activate</a><a ng-click="retireRecord(record)" ng-if="isTabActive([\'inactive\'])">Retire</a><a ng-click="unretireRecord(record)" ng-if="isTabActive([\'retired\'])">Unretire</a><a ng-click="deleteRecord(record)" ng-if="canDelete &amp;&amp; isTabActive([\'inactive\', \'retired\'])">Delete</a></div>\n            </div>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table><br/>\n</div>'),a.put("app/rules/views/create-rules.html",'\n<section class="page-announcements">\n  <section class="section-announcements">\n    <h2>New Rule</h2>\n    <rule-form></rule-form>\n  </section>\n</section>'),a.put("app/rules/views/edit-rules.html",'\n<section class="page-announcements">\n  <section class="section-announcements">\n    <h2>Edit Rule</h2>\n    <rule-form></rule-form>\n  </section>\n</section>'),a.put("app/rules/views/list-rules.html",'\n<div class="page">\n  <div class="section">\n    <div class="row margin-top">\n      <div class="col-sm-12">\n        <h1 class="page-title">Rules</h1>\n        <div class="row push-top-narrow">\n          <div class="col-sm-10">\n            <div ng-class="barClass" class="filters filters-category">\n              <div name="sev-toggles" role="group" class="severity-filter-toggle">\n                <button ng-class="filterClass(categoryName)" ng-click="toggle(categoryName)" ng-repeat="categoryName in categoryNames" class="{{categoryName}}-toggle"><i ng-class="categoryName" class="icon-circle"></i><span class="sev">{{ categoryName | titlecase }}</span></button>\n              </div>\n            </div>\n          </div>\n          <div class="col-sm-2 text-right"><a ui-sref="admin-rules" ng-show="user.is_internal" class="btn btn-sm btn-app">Rules Admin</a></div>\n        </div>\n      </div>\n    </div>\n    <div class="row row-short">\n      <div class="col-sm-12">\n        <section ng-show="loading">\n          <div class="spinner spinner-lg"></div>\n        </section>\n        <div ng-repeat="rule in rules | orderBy:\'description\'" ng-class="{faded: rule.acks.length}" class="content-block content-block-outline">\n          <div id="{{rule.rule_id}}" class="header">\n            <severity-icon severity="rule.severity" class="i-mute pull-right"></severity-icon><span ng-click="permalink(rule.rule_id)" class="title pointer"><i ng-class="rule.category.toLowerCase()" class="icon-circle icon-circle-large"></i><span>{{ rule.category }} &gt; {{ rule.description }}</span><i class="fa fa-link permalink"></i></span>\n          </div>\n          <div collapse="rule.acks.length" class="content">\n            <div ng-bind-html="rule.summary_html | trust_html" class="gray"></div>\n          </div>\n          <div class="footer footer-short text-right">\n            <rule-toggle rule="rule"></rule-toggle>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'),a.put("app/rules/views/show-rules.html",'\n<section class="page-announcements">\n  <section class="section-announcements">\n    <h2>Rule <small ng-show="rule.plugin &amp;&amp; rule.error_key">- {{ rule.plugin }}|{{ rule.error_key }}</small></h2>\n    <form ng-submit="saveFn()" name="form" ng-show="rule">\n      <fieldset>\n        <legend></legend>\n        <div class="form-group">\n          <label class="control-label">Plugin</label>\n          <p class="form-control-static">{{ rule.plugin }}</p>\n        </div>\n        <div class="form-group">\n          <label class="control-label">Error key </label>\n          <p class="form-control-static">{{ rule.error_key }}</p>\n        </div>\n        <div class="form-group">\n          <label class="control-label">Category </label>\n          <p class="form-control-static">{{ rule.category }}</p>\n        </div>\n        <div class="form-group">\n          <label class="control-label">Severity </label>\n          <p class="form-control-static">{{ rule.severity }}</p>\n        </div>\n        <div class="form-group">\n          <label class="control-label">Display Name</label>\n          <p class="form-control-static">{{ rule.description }}</p>\n        </div>\n        <div class="form-group">\n          <label class="control-label">Summary</label>\n          <pre>{{ rule.summary }}</pre>\n        </div>\n        <div class="form-group">\n          <label class="control-label">Generic</label>\n          <pre>{{ rule.generic }}</pre>\n        </div>\n        <div class="form-group">\n          <label class="control-label">Reason</label>\n          <pre>{{ rule.reason }}</pre>\n        </div>\n        <div class="form-group">\n          <label class="control-label">Resolution</label>\n          <pre>{{ rule.resolution }}</pre>\n        </div>\n        <div class="form-group">\n          <label class="control-label">Common</label>\n          <pre>{{ rule.more_info }}</pre>\n        </div>\n        <div class="form-group">\n          <label class="control-label">Node ID </label>\n          <p class="form-control-static">{{ rule.node_id }}</p>\n        </div>\n        <div class="checkbox">\n          <label>\n            <input type="checkbox" ng-model="rule.active" disabled="disabled"/>Active\n          </label>\n        </div>\n        <div class="checkbox">\n          <label>\n            <input type="checkbox" ng-model="rule.retired" disabled="disabled"/>Retired\n          </label>\n        </div>\n        <div class="form-group">\n          <label class="control-label"></label>\n          <button name="preview" ng-click="preview(rule)" class="btn btn-block btn-primary">Preview</button>\n        </div>\n        <div class="form-group">\n          <label class="control-label"></label>\n          <button ng-click="editInfo(rule)" class="btn btn-block btn-info">Edit</button>\n        </div>\n      </fieldset>\n    </form>\n  </section>\n</section>'),a.put("app/systems/systems.html",'\n<section class="page-systems">\n  <section class="section-system actions">\n    <div class="complete ng-cloak">\n      <div class="row">\n        <div class="col-sm-8">\n          <h1 class="page-title">Systems</h1>\n          <div ng-hide="loading" class="system-summary">\n            <h4><span class="num success"><i class="fa fa-check-circle"></i> {{summary.green}}</span>\n              <ng-pluralize count="summary.green" when="{\'one\': \' System \', \'other\': \' Systems \'}"></ng-pluralize>with no actions&nbsp;&nbsp;&nbsp;<span class="num fail"><i class="fa fa-exclamation-circle"></i> {{summary.red}}</span>\n              <ng-pluralize count="summary.red" when="{\'one\': \' System \', \'other\': \' Systems \'}"></ng-pluralize>with actions\n            </h4>\n          </div>\n        </div>\n        <div class="col-sm-4">\n          <group-select></group-select>\n        </div>\n      </div>\n      <div ng-show="loading" class="row row-short">\n        <div class="col-xs-12">\n          <div class="load text-center">\n            <div class="spinner spinner-lg"></div>Loading system information\n          </div>\n        </div>\n      </div>\n      <div class="row">\n        <div class="col-xs-12">\n          <system-summary-table ng-hide="loading" systems="systems"></system-summary-table>\n        </div>\n      </div>\n    </div>\n  </section>\n</section>'),a.put("components/accountSelect/accountSelect.html",'\n<div ng-show="user.is_internal" class="tam">\n  <label>Account Number</label>\n  <div ng-click="reset()" class="fa fa-refresh pull-right tam-icon pointer"></div>\n  <input ng-model="account_number" ng-model-options="{ debounce: 750 }" ng-change="accountChange(account_number)" class="accNumbInput"/>\n</div>'),a.put("components/actionbar/actionbar.html",'\n<div ng-show="actions.length" class="actionbar"><i ng-class="action.icon" ng-repeat="action in actions" ng-click="action.fn()" tooltip="{{action.title}}" tooltip-trigger="mouseenter" tooltip-append-to-body="true" tooltip-placement="bottom" class="pointer fa"></i></div>'),a.put("components/bullhorn/bullhorn.html",'\n<div><i ng-click="toggle()" class="announcements-icon">\n    <div ng-show="unseen.count" class="has-announcement"><span class="count">{{unseen.count}}</span></div>\n    <div ng-show="unseen.count" class="fa fa-bullhorn"></div><a ui-sref="announcements" ng-hide="unseen.count" class="fa fa-bullhorn"></a></i>\n  <div id="announcements" ng-show="unseen.count &amp;&amp; showAnnouncements" class="announcements fade-out">\n    <ul>\n      <li ng-repeat="a in announcements | filter:unseenFilter" class="clearfix">\n        <div><span ng-hide="a.slug &amp;&amp; a.details">{{a.message}}</span><a ng-show="a.slug &amp;&amp; a.details" ui-sref="view-announcement({slug: a.slug})" ng-click="toggle()">{{a.message}}</a>\n          <div ng-click="ack(a)" class="fa fa-close btn btn-xs pull-right"></div>\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>'),a.put("components/config/groups/groups.html",'\n<div class="groups">\n  <section>\n    <div ng-bind="message" ng-show="message.length &gt; 0" role="alert" class="alert alert-danger"></div>\n    <group-form></group-form>\n  </section>\n  <section ng-show="loading">\n    <div class="spinner spinner-lg"></div>Loading group list info \n  </section>\n  <section>\n    <div class="row">\n      <div class="col-xs-12">\n        <h2 ng-show="!loading" class="page-title">Groups List</h2>\n        <div ng-show="isCreating" class="text-center">\n          <div class="spinner spinner-lg"></div>Creating group \n        </div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-xs-12">\n        <div class="group-list">\n          <group ng-repeat="group in groups | orderBy:\'display_name\'" class="group"></group>\n        </div>\n      </div>\n    </div>\n  </section>\n</div>'),a.put("components/config/hidden/hidden.html",'\n<div class="acks row active">\n  <div class="col-md-8">\n    <h2 class="page-title">Hidden Rules</h2>\n    <p>You currently have\n      <ng-pluralize count="acks.length" when="{\'one\': \'1 hidden rule.\', \'other\': \'{} hidden rules.\'}"></ng-pluralize>\n    </p>\n    <p><strong>Note:</strong>These are account wide.</p>\n  </div>\n  <div class="col-md-12">\n    <section ng-show="loading">\n      <div class="spinner spinner-lg"></div>Loading hidden rules\n    </section>\n  </div>\n  <div class="col-md-12">\n    <section ng-hide="loading">\n      <table ng-show="acks.length" class="table table-striped">\n        <thead>\n          <tr>\n            <th>Category</th>\n            <th>Rule</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="ack in acks">\n            <td>{{ack.rule.category}}</td>\n            <td>{{ack.rule.description}}</td>\n            <td>\n              <div ng-click="delete(ack)" class="fa fa-times pointer pull-right"></div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </section>\n  </div>\n</div>'),a.put("components/config/messaging/messaging.html",'\n<div class="acks row active">\n  <div class="col-md-12">\n    <h2 class="page-title">Messaging Preferences</h2>\n    <p>Manage Red Hat Access Insights email subscriptions for your personal login. All emails will be sent to the email address associated with your login. To update your address see <a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html" target="_blank">Personal Info</a>.</p>\n    <form ng-submit="save(form)" name="form">\n      <fieldset>\n        <div ng-repeat="campaign in campaigns | orderBy:\'id\' track by campaign.id" class="checkbox push-bottom-narrow">\n          <label>\n            <input type="checkbox" ng-model="campaign.enrolled"/>{{campaign.label}}\n            <div ng-if="campaign.description" class="small"> {{campaign.description}}</div>\n          </label>\n        </div>\n        <button name="submit" ng-disabled="form.$pristine" class="btn btn-app">Update</button>\n      </fieldset>\n    </form>\n  </div>\n</div>'),a.put("components/config/permissions/permissions.html",'\n<div class="user-permissions">\n  <div class="row">\n    <div class="col-xs-12">\n      <input ng-model="newPermission.sso_username"/>\n      <select ng-options="p as p.label for p in permissions" ng-model="tmpPermission"></select>\n      <div ng-click="addNewPermission()" class="btn">Add</div>\n    </div>\n  </div>\n  <div class="row group-list">\n    <div ng-repeat="user in users | filter:newPermission.sso_username" class="col-sm-4">\n      <div class="group user-permission">\n        <div class="name header"><a ng-click="newPermission.sso_username = user">{{user}}</a></div>\n        <div class="content">\n          <div class="permissions">\n            <div ng-repeat="p in userMap[user]" class="perm">{{p.permission.label}}\n              <div ng-click="removeSingle(p)" class="remove fa fa-times"></div>\n            </div>\n          </div>\n          <div class="remove pull-right"><a ng-click="removeAll(userMap[user])" class="fa fa-times">Remove all!</a></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'),a.put("components/config/uploader/uploader.html",'\n<div class="remove">\n  <section>\n    <h2 class="page-titl">Uploader Configuration</h2>\n    <div class="row">\n      <div class="col-xs-12">\n        <h4>Collect</h4>\n      </div>\n      <div class="col-md-6">\n        <div class="panel panel-default">\n          <div class="panel-heading">\n            <h3 class="panel-title">Commands</h3>\n          </div>\n          <div class="panel-body uploader-collect-list">\n            <ul class="list-group no-pad">\n              <li ng-repeat="command in uploaderJson.commands" class="list-group-item">{{command.command}}\n                <ul ng-if="command.pattern.length" class="list-group no-pad">\n                  <li ng-repeat="pattern in command.pattern" class="list-group-item">{{pattern}}</li>\n                </ul>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n      <div class="col-md-6">\n        <div class="panel panel-default">\n          <div class="panel-heading">\n            <h3 class="panel-title">Files</h3>\n          </div>\n          <div class="panel-body uploader-collect-list">\n            <ul class="list-group no-pad">\n              <li ng-repeat="file in uploaderJson.files" class="list-group-item">{{file.file}}\n                <ul ng-if="file.pattern.length" class="list-group no-pad">\n                  <li ng-repeat="pattern in file.pattern" class="list-group-item">{{pattern}}</li>\n                </ul>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n      <div class="col-xs-12">\n        <h4>Exclude</h4>\n      </div>\n    </div>\n  </section>\n</div>'),a.put("components/group/views/form.html",'\n<div class="row">\n  <form ng-submit="create(newGroup)">\n    <div class="col-xs-12 col-sm-8 col-md-7">\n      <label>Create a new group</label>\n      <input ng-model="newGroup.display_name" placeholder="Enter a name here" class="full-width"/>\n    </div>\n    <div class="col-xs-12 col-sm-4 col-md-2">\n      <label class="invisible">\n        <Add>Group</Add>\n      </label><a ng-disabled="!newGroup.display_name" ng-click="create(newGroup)" class="pointer"><span class="fa fa-plus"> Add Group</span></a>\n    </div>\n  </form>\n</div>'),a.put("components/group/views/group.html",'\n<div ng-click="isCollapsed = !isCollapsed" class="header pointer">\n  <div class="row">\n    <div class="col-xs-8 col-sm-11">\n      <div class="host-info">\n        <h4 class="host">{{group.display_name}}<small> &mdash; \n            <ng-pluralize count="group.systems.length" when="{\'one\': \'1 system\', \'other\': \'{} systems\'}"></ng-pluralize></small></h4>\n      </div>\n    </div>\n    <div class="col-xs-4 col-sm-1">\n      <div class="options pull-right">\n        <div ng-class="{\'fa-minus-square-o\':!isCollapsed, \'fa-plus-square-o\':isCollapsed}" class="fa"></div>\n      </div>\n    </div>\n  </div>\n</div>\n<div collapse="isCollapsed" class="content">\n  <div class="row">\n    <system-table group="group" type="available"></system-table>\n    <system-table group="group" type="in"></system-table>\n  </div>\n</div>\n<div class="footer">\n  <div class="row">\n    <div class="col-xs-12"><a ng-click="deleteGroup(group)" class="pull-right pointer">Delete Group</a></div>\n  </div>\n</div>'),a.put("components/groupSelect/groupSelect.html",'\n<div ng-show="groups.length" class="groups-select">\n  <label>Groups</label>\n  <div class="rounded group-select dropdown-select">\n    <select ng-model="group" ng-options="g as g.display_name for g in groups track by g.id" ng-change="groupChange()">\n      <option value="">All</option>\n    </select>\n  </div>\n</div>'),a.put("components/overview/overview.html",'\n<div class="chart-container">\n  <div class="donut-container">\n    <div class="donut-hole"><span ng-show="loading" class="preloader"></span>\n      <div class="content"><span class="num">{{getTotal()}}</span>\n        <ng-pluralize count="getTotal()" when="{\'one\': \'Action\', \'other\': \'Actions\'}" class="text"></ng-pluralize>\n      </div>\n    </div>\n    <div class="rha-telemetry-donut"></div>\n  </div>\n  <div ng-class="loading ? \'inactive\' : \'\'" class="reset hidden">\n    <button ng-click="reload()" ng-disabled="loading" class="chart-back simple"><span class="fa fa-refresh"></span><span class="hidden">Reset Chart</span></button>\n  </div>\n  <div class="row row-tall">\n    <div class="col-sm-10 col-sm-offset-1">\n      <p>Use this chart to drill down and discover problems within your organization.</p>\n      <hr/>\n      <p class="light">There are&nbsp;<strong>{{getTotal()}}&nbsp;</strong><span ng-hide="isOverview()">{{getCategory()}} </span>action(s) detected from systems in your organization.</p>\n    </div>\n  </div>\n  <div ng-show="getReportDetails()" class="row"></div>\n  <div class="row chart-header">\n    <div class="col-xs-12">\n      <div ng-hide="getLoadingDetails()">\n        <h1 class="page-title">{{getRuleDetails().description}}</h1>\n      </div>\n    </div>\n  </div>\n  <div ng-show="!getLoadingDetails() &amp;&amp; getReportDetails()" class="row">\n    <div class="col-sm-12">\n      <table class="table ng-table nomar">\n        <thead>\n          <tr>\n            <th ng-class="predicate | sortClass:\'system.hostname\':reverse" ng-click="predicate = \'system.hostname\'; reverse=!reverse" class="sortable">\n              <div>Hostname</div>\n            </th>\n            <th ng-class="predicate | sortClass:\'date\':reverse" ng-click="predicate = \'date\'; reverse=!reverse" class="sortable">\n              <div>Reported</div>\n            </th>\n            <th></th>\n          </tr>\n        </thead>\n      </table>\n      <div class="tbody-scrollable">\n        <table class="table ng-table nomar">\n          <tbody>\n            <tr ng-click="showSystem(report.system)" ng-repeat="report in getReportDetails() | orderBy:predicate:reverse">\n              <td>{{ report.system.hostname }}</td>\n              <td>{{report.date | timeAgo}}</td>\n              <td><a>View</a></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>'),a.put("components/overview/overviewBack/overviewBack.html",'\n<div ng-hide="isOverview()">\n  <div class="table-nav"></div>\n</div>'),a.put("components/overview/overviewBreadcrumbs/overviewBreadcrumbs.html",'\n<ol ng-show="crumbs.length" class="breadcrumb overview-crumbs">\n  <li ng-repeat="crumb in crumbs" ng-class="{active: $last}"><a ng-hide="$last" ng-click="crumbClick(crumb)">{{crumb.label}}</a><span ng-show="$last">{{crumb.label}}</span></li>\n</ol>'),a.put("components/overview/overviewDetails/overviewDetails.html",'\n<div ng-show="getLoadingDetails()" class="loader">\n  <div class="spinner"></div>Loading Reports\n</div>\n<div ng-hide="getReportDetails() || getLoadingDetails()" class="row chart-header">\n  <div class="col-xs-12">\n    <h1 class="page-title">{{getTitle() | titlecase}}</h1>\n  </div>\n</div>\n<div class="row row-short">\n  <div class="col-xs-12">\n    <overview-breadcrumbs class="overview-breadcrumbs"></overview-breadcrumbs>\n  </div>\n</div>\n<div class="row row-short">\n  <div class="col-xs-12">\n    <div class="table-filters">\n      <group-select></group-select>\n      <div class="severity-bar"></div>\n    </div>\n  </div>\n</div>\n<div class="row row-short">\n  <div class="col-xs-12">\n    <div id="legend" class="legend">\n      <table class="table ng-table nomar">\n        <thead>\n          <tr>\n            <th width="60%" ng-class="predicate | sortClass:\'name\':reverse" ng-click="predicate = \'name\'; reverse=!reverse" class="sortable">\n              <div><span class="chart-icon"></span>Section</div>\n            </th>\n            <th width="12%" ng-class="predicate | sortClass:\'severityNum\':reverse" ng-click="predicate = \'severityNum\'; reverse=!reverse" ng-hide="isOverview()" class="sortable">\n              <div>Sev</div>\n            </th>\n            <th width="20%" ng-class="predicate | sortClass:\'value\':reverse" ng-click="predicate = \'value\'; reverse=!reverse" class="sortable">\n              <div>Count</div>\n            </th>\n            <th ng-hide="isOverview()"></th>\n          </tr>\n        </thead>\n      </table>\n      <div class="tbody-scrollable">\n        <table class="table nomar">\n          <tbody>\n            <tr ng-repeat="group in getData() | orderObjectBy:predicate:reverse" ng-class="{active: group.id === getRule()}" class="legend-item">\n              <td width="60%" ng-click="arcClick(group)"><span ng-style="{borderColor: group.color || \'inherit\'}" class="icon-circle"></span>{{group.name}}</td>\n              <td width="12%" ng-click="arcClick(group)" ng-hide="isOverview()" class="filter-on text-center">\n                <severity-icon severity="group.severity"></severity-icon>\n              </td>\n              <td width="20%" ng-click="arcClick(group)">{{ group.value }}</td>\n              <td ng-click="toggleRule(group)" ng-hide="isOverview()" class="view-toggle"><span ng-click="ackAction(group)" class="link">Hide</span></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row row-short">\n  <div class="col-xs-12">\n    <div class="overview-back"></div>\n  </div>\n</div>'),a.put("components/overview/overviewRule/overviewRule.html",'\n<div ng-show="loading" class="row margin-top">\n  <div class="col-xs-12">\n    <section class="text-center">\n      <div class="spinner spinner-lg"></div>\n    </section>\n  </div>\n</div>\n<div ng-hide="loading" class="row margin-top">\n  <div class="col-md-6 col-lg-5">\n    <h2>\n      <div ng-if="ruleDetails.severity" severity="ruleDetails.severity" class="severity-icon fa-small"></div>&nbsp;{{ruleDetails.description}}\n    </h2>\n    <p ng-bind-html="ruleDetails.generic_html | trust_html"></p>\n  </div>\n  <div class="col-md-6 col-lg-7">\n    <div class="row">\n      <div class="col-xs-12">\n        <h1 class="page-title">Impacted Systems</h1>\n      </div>\n    </div>\n    <div class="row row-short">\n      <div class="col-xs-12">\n        <overview-breadcrumbs class="overview-breadcrumbs"></overview-breadcrumbs>\n      </div>\n    </div>\n    <div ng-show="getReportDetails()" class="row row-short">\n      <div ng-show="!loading &amp;&amp; getReportDetails()">\n        <div class="col-sm-12">\n          <div class="chart-details no-border legend">\n            <table class="table nomar ng-table">\n              <thead>\n                <tr>\n                  <th width="60%" ng-class="predicate | sortClass:\'system.hostname\':reverse" ng-click="predicate = \'system.hostname\'; reverse=!reverse" class="sortable">\n                    <div>Hostname</div>\n                  </th>\n                  <th width="25%" ng-class="predicate | sortClass:\'date\':reverse" ng-click="predicate = \'date\'; reverse=!reverse" class="sortable">\n                    <div>Reported</div>\n                  </th>\n                  <th></th>\n                </tr>\n                <tr>\n                  <th colspan="3">\n                    <input type="text" ng-model="filters.system.hostname" placeholder="Filter" class="form-control nomar-left input-sm"/>\n                  </th>\n                </tr>\n              </thead>\n            </table>\n            <div class="tbody-scrollable">\n              <table class="table nomar">\n                <tbody>\n                  <tr ng-click="showSystem(report.system)" ng-repeat="report in getReportDetails() | filter:filters | orderBy:predicate:reverse">\n                    <td width="60%">{{ ::report.system.hostname }}</td>\n                    <td width="25%">{{ ::report.date | timeAgo}}</td>\n                    <td><a>View</a></td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div ng-hide="loading" class="row row-short">\n      <div class="col-xs-12">\n        <div class="overview-back"></div>\n      </div>\n    </div>\n  </div>\n</div>'),a.put("components/recommendedKbase/recommendedKbase.html",'\n<div ng-show="solution &amp;&amp; !loading" class="matched-solution"><i class="fa fa-circular fa-lightbulb-o"></i><strong> Related Knowledgebase articles: </strong><a target="_blank" href="{{solution.viewUri}}">{{solution.title}}</a></div>\n<div ng-show="loading" class="spinner spinner-sm spinner-inline"></div>'),a.put("components/rule/ruleForm/ruleForm.html",'\n<form ng-submit="saveFn()" name="form">\n  <fieldset>\n    <legend></legend>\n    <div class="row">\n      <div class="col-sm-8">\n        <label class="control-label">Display Name</label>\n        <input ng-model="rule.description" type="text" required="required" class="form-control"/>\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="control-label">Rule ID</label>\n      <p class="form-control-static">{{rule.rule_id}}</p>\n    </div>\n    <div class="panel panel-default">\n      <div class="panel-heading"><small ng-show="!locked" class="pull-left">Note: changing plugin and/or error key will change the rule id and can have detrimental effects.</small>\n        <div class="pull-right"><i ng-click="toggleLock()" ng-class="{\'fa-lock\': locked, \'fa-unlock\': !locked}" class="pointer fa"></i></div>\n        <div class="clearfix"></div>\n      </div>\n      <div class="panel-body">\n        <div class="row">\n          <div class="col-xs-6">\n            <label class="control-label">Plugin</label>\n            <rule-plugin ng-hide="locked"></rule-plugin>\n            <p ng-show="locked" class="form-control-static">{{rule.plugin}}</p>\n          </div>\n          <div class="col-xs-6">\n            <label class="control-label">Error key </label>\n            <input ng-hide="locked" ng-model="rule.error_key" type="text" required="required" class="form-control"/>\n            <p ng-show="locked" class="form-control-static">{{rule.error_key}}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-xs-6 col-sm-4">\n        <label class="control-label">Category </label>\n        <select ng-model="rule.category" type="text" ng-options="c as c for c in categories | titlecase" required="required" class="form-control"></select>\n      </div>\n      <div class="col-xs-6 col-sm-4">\n        <label class="control-label">Severity </label>\n        <select ng-model="rule.severity" type="text" ng-options="s as s for s in severities" required="required" class="form-control"></select>\n      </div>\n      <div class="col-xs-6 col-sm-4">\n        <label class="control-label">Solution ID </label>\n        <input ng-model="rule.node_id" type="text" class="form-control"/>\n      </div>\n    </div>\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="row">\n          <div class="col-md-2">\n            <h2>Summary</h2>\n          </div>\n          <div class="col-md-10">\n            <p class="pull-right">This is displayed on the rules list page. Short sentence or two about the rule.</p>\n          </div>\n        </div>\n      </div>\n      <div class="panel-body">\n        <div class="form-group">\n          <div class="pull-right">\n            <yes-no no="true" text="pydata"></yes-no>\n            <yes-no yes="true" text="markdown"></yes-no>\n          </div>\n          <textarea ng-model="rule.summary" type="text" rows="5" class="form-control"></textarea>\n        </div>\n      </div>\n    </div>\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="row">\n          <div class="col-md-4">\n            <h2>Generic messaging</h2>\n          </div>\n          <div class="col-md-8">\n            <p class="pull-right">Impact, Reason, Resolution before a machine is selected.</p>\n          </div>\n        </div>\n      </div>\n      <div class="panel-body">\n        <div class="form-group">\n          <div class="pull-right">\n            <yes-no no="true" text="pydata"></yes-no>\n            <yes-no yes="true" text="markdown"></yes-no>\n          </div>\n          <textarea ng-model="rule.generic" type="text" rows="5" class="form-control"></textarea>\n        </div>\n      </div>\n    </div>\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="row">\n          <div class="col-md-5">\n            <h2>Machine specific messaging</h2>\n          </div>\n          <div class="col-md-7">\n            <p class="pull-right">Report data is accessible and will be compiled with <a href="http://olado.github.io/doT/" target="_blank">doT.</a></p>\n          </div>\n        </div>\n      </div>\n      <div class="panel-body">\n        <div class="form-group">\n          <div class="pull-right">\n            <yes-no yes="true" text="pydata"></yes-no>\n            <yes-no yes="true" text="markdown"></yes-no>\n          </div>\n          <label class="control-label">Impact and Reason</label>\n          <textarea ng-model="rule.reason" type="text" rows="5" class="form-control"></textarea>\n        </div>\n        <div class="form-group">\n          <div class="pull-right">\n            <yes-no yes="true" text="pydata"></yes-no>\n            <yes-no yes="true" text="markdown"></yes-no>\n          </div>\n          <label class="control-label">Resolution</label>\n          <textarea ng-model="rule.resolution" type="text" rows="5" class="form-control"></textarea>\n        </div>\n      </div>\n    </div>\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="row">\n          <div class="col-md-2">\n            <h2>Common</h2>\n          </div>\n          <div class="col-md-10">\n            <p class="pull-right">\n              This is displayed on both the generic and specific views. About the issue, \n              its discovery, extra details that helps the customer understand the "what". This section \n              should contain all the portal links and references\n            </p>\n          </div>\n        </div>\n      </div>\n      <div class="panel-body">\n        <div class="form-group">\n          <div class="pull-right">\n            <yes-no no="true" text="pydata"></yes-no>\n            <yes-no yes="true" text="markdown"></yes-no>\n          </div>\n          <textarea ng-model="rule.more_info" type="text" rows="5" class="form-control"></textarea>\n        </div>\n      </div>\n    </div>\n    <div class="checkbox-inline">\n      <label>\n        <input type="checkbox" ng-model="rule.active"/>Active\n      </label>\n    </div>\n    <div class="checkbox-inline">\n      <label>\n        <input type="checkbox" ng-model="rule.retired"/>Retired\n      </label>\n    </div>\n    <div class="pull-right">\n      <div class="btn-group">\n        <button name="preview" type="button" ng-click="preview(rule)" class="btn btn-primary">Preview</button>\n        <button name="submit" ng-disabled="form.$error.required" class="btn btn-accent">Save</button>\n      </div>\n    </div>\n  </fieldset>\n</form>'),a.put("components/rule/rulePlugin/rulePlugin.html",'\n<select ng-model="rule.plugin" options="plugins" selectize="config" required="required"></select>'),a.put("components/rule/ruleReason/ruleReason.html",'\n<h3 class="section-heading">Detected issue</h3>\n<div class="reason detail-part">\n  <div ng-bind-html="report.rule.reason | trust_html" target-blank="" class="detail-content"></div>\n</div>'),a.put("components/rule/ruleResolution/ruleResolution.html",'\n<div class="detail-part pad-top">\n  <div class="detail-content answer">\n    <h3 class="section-heading">Steps to resolve</h3><span ng-bind-html="report.rule.resolution | trust_html" target-blank=""></span>\n  </div>\n</div>'),a.put("components/rule/ruleSummaries/ruleSummaries.html",'\n<div ng-if="loading.isLoading" class="row">\n  <div class="col-xs-12">\n    <div class="loading-block text-center">\n      <div class="detail-part">\n        <div class="spinner spinner-lg"></div>Loading report(s) for {{system.hostname}}\n      </div>\n    </div>\n  </div>\n</div>\n<div ng-hide="loading.isLoading" class="row">\n  <div class="col-xs-12"><a ng-click="expandAll()" class="btn btn-outline btn-xs pull-right pointer">{{allExpanded ? \'Collapse\' : \'Expand\'}}  All <i ng-class="{\'fa-caret-up\': allExpanded, \'fa-caret-down\': !allExpanded}" class="fa"></i></a></div>\n</div>\n<div report="report" rule-id="rule_id" rule-filter="ruleFilter" ng-repeat="report in system.reports" class="rule-summary system-overlay-item content-block content-block-outline"></div>'),a.put("components/rule/ruleSummary/ruleSummary.html",'\n<div ng-click="toggleCollapse()" ng-class="{\'header-collapsed\': isCollapsed}" class="header pointer"><i ng-class="{\'fa-minus-square-o\':!isCollapsed, \'fa-plus-square-o\':isCollapsed}" class="fa toggler"></i>\n  <h3 class="title">\n    <severity-icon severity="report.rule.severity"></severity-icon>{{ report.rule.category }} &gt; {{ report.rule.description }}\n  </h3>\n</div>\n<div collapse="isCollapsed" ng-class="{\'content-collapsed\': isCollapsed}" class="content">\n  <div class="row">\n    <div class="col-sm-5">\n      <div class="rule-reason gray"></div>\n    </div>\n    <div class="col-sm-7">\n      <div class="rule-resolution"></div>\n      <div ng-show="report.rule.node_id" node="report.rule.node_id" class="recommended-kbase"></div>\n    </div>\n  </div>\n  <div ng-show="report.rule.more_info" class="row row-short">\n    <div class="col-xs-12">\n      <div class="text-center border-top">\n        <div ng-click="showMoreInfo = !showMoreInfo" class="nomar push-top-narrow pointer"><a class="link"><strong>{{showMoreInfo ? \'Hide\' : \'Show\'}}  more info &nbsp;</strong><i ng-class="{\'fa-caret-up\': showMoreInfo, \'fa-caret-down\': !showMoreInfo}" class="fa"></i></a></div>\n      </div>\n    </div>\n  </div>\n</div>\n<div collapse="!showMoreInfo" class="footer more-info">\n  <div ng-bind-html="report.rule.more_info_html | trust_html" ng-show="report.rule.more_info"></div>\n</div>\n<div class="debug">\n  <div ng-show="debug" class="row">\n    <div class="col-sm-12 border-top push-top">\n      <div class="row">\n        <div ng-show="noReports" class="col-xs-12">\n          <h4>Oh Snap! No reports found.</h4>\n          <div class="form-group">\n            <textarea ng-model="debug.pydata" placeholder="Enter your own pydata here. MUST BE VALID JSON!" ng-change="validatePydata(debug.pydata)" ng-model-options="{ debounce: 100 }" class="form-control"></textarea>\n          </div>\n          <div class="form-group">\n            <button ng-disabled="invalidJSON" ng-click="buildPreview({pydata: debug.pydata})" class="btn btn-block btn-success">Preview</button>\n          </div>\n        </div>\n        <div ng-hide="noReports" class="col-xs-6">\n          <h4>Choose a different report</h4>\n          <div class="form-group">\n            <label>Machine ID</label>\n            <select ng-model="debug.machine_id" type="text" ng-options="m for m in machines track by m" ng-change="buildPreview({machine_id: debug.machine_id})" class="form-control"></select>\n          </div>\n          <div class="form-group">\n            <label>UUID</label>\n            <select ng-model="debug.uuid" type="text" ng-options="u for u in uuids track by u" ng-change="buildPreview({uuid: debug.uuid})" class="form-control"></select>\n          </div>\n        </div>\n        <div ng-hide="noReports" class="col-xs-6">\n          <h4>Debug Info</h4>\n          <dl>\n            <dt>Details</dt>\n            <dd>{{report.details | json}}</dd>\n          </dl>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'),a.put("components/rule/ruleToggle/ruleToggle.html",'<a><strong ng-click="ackAction()">{{text}}</strong></a>'),a.put("components/severityBar/severityBar.html",'\n<div ng-class="barClass" class="filters filters-severity">\n  <div name="sev-toggles" role="group" class="severity-filter-toggle">\n    <button ng-class="filterClass(sevName)" ng-click="toggle(sevName)" ng-repeat="sevName in severityNames" class="{{sevName.toLowerCase()}}-toggle">\n      <severity-icon severity="sevName"></severity-icon><span class="sev">{{ sevName }}</span>\n    </button>\n  </div>\n</div>'),a.put("components/severityIcon/severityIcon.html",'<i ng-class="severityClass" class="fa"></i>'),a.put("components/sideNav/overviewSideNav/overviewSideNav.html",'\n<li><a ui-sref="overview({category: null})" ng-class="{current: isActive(null)}">Overview</a>\n  <ul ng-show="overview">\n    <li><a ui-sref="overview({category: c})" ng-class="{current: isActive(c)}" ng-repeat="c in categories" ng-show="getCounts()[c]">{{c|titlecase}} <small ng-show="getCounts()[c]">({{getCounts()[c]}})</small></a></li>\n  </ul>\n</li>'),a.put("components/sideNav/sideNav.html",'\n<div class="dashboard-navigation-container">\n  <aside class="dashboard-navigation">\n    <div class="user-profile">\n      <account-select></account-select>\n      <menu class="nav">\n        <ul>\n          <rha-telemetry-overview-side-nav></rha-telemetry-overview-side-nav>\n          <li><a ui-sref="systems" ui-sref-active="current">Systems</a></li>\n          <li><a ui-sref="rules" ui-sref-active="current">Rules</a></li>\n          <li><a ui-sref="config" ui-sref-active="current">Configuration</a></li>\n        </ul>\n      </menu>\n    </div>\n  </aside>\n</div>'),a.put("components/system/systemModal/systemModal.html",'\n<div class="system-overlay">\n  <div class="modal-actions">\n    <div ng-click="close()" class="fa fa-close pull-right"></div>\n  </div>\n  <div class="modal-title">\n    <div class="icon"><span class="fa fa-globe"></span></div>\n    <h2><b>hostname: </b><span>{{ system.hostname }}</span></h2>\n  </div>\n  <div system="system" machine-id="system.machine_id" rule="rule" rule-filter="ruleFilter" loading="loading" class="rule-summaries"></div>\n  <div ng-if="system.__fake" report="{}" rule="rule" loading="loading" class="rule-summary system-overlay-item content-block content-block-outline"></div>\n</div>'),a.put("components/system/systemSummaryTable/systemSummaryTable.html",'\n<table ng-table="tableParams" class="table">\n  <thead>\n    <tr>\n      <th ng-class="{\'sort-asc\': tableParams.isSortBy(\'hostname\', \'asc\'), \'sort-desc\': tableParams.isSortBy(\'hostname\', \'desc\')}" ng-click="tableParams.sorting({\'hostname\' : tableParams.isSortBy(\'hostname\', \'asc\') ? \'desc\' : \'asc\'})" class="sortable">\n        <div>Hostname</div>\n      </th>\n      <th ng-class="{\'sort-asc\': tableParams.isSortBy(\'last_check_in\', \'asc\'), \'sort-desc\': tableParams.isSortBy(\'last_check_in\', \'desc\')}" ng-click="tableParams.sorting({\'last_check_in\' : tableParams.isSortBy(\'last_check_in\', \'asc\') ? \'desc\' : \'asc\'})" class="sortable">\n        <div>Last Check In</div>\n      </th>\n      <th ng-class="{\'sort-asc\': tableParams.isSortBy(\'reports.length\', \'asc\'), \'sort-desc\': tableParams.isSortBy(\'reports.length\', \'desc\')}" ng-click="tableParams.sorting({\'reports.length\' : tableParams.isSortBy(\'reports.length\', \'asc\') ? \'desc\' : \'asc\'})" class="sortable">\n        <div>Status</div>\n      </th>\n      <th></th>\n    </tr>\n    <tr>\n      <th colspan="4">\n        <input type="text" ng-model="filters.hostname" placeholder="Filter" class="form-control nomar-left input-sm"/>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="system in $data track by system.machine_id" ng-class="::{\'stale-system\': isStale(system.last_check_in), \'danger\': isReallyStale(system.last_check_in)}">\n      <td ng-hide="::system.reports.length">{{::system.hostname}}</td>\n      <td ng-show="::system.reports.length"><a ng-click="showSystem(system)">{{::system.hostname}}</a></td>\n      <td class="text-center"><span ng-show="::system.last_check_in">{{::system.last_check_in | timeAgo}}</span><span ng-hide="::system.last_check_in">--</span></td>\n      <td class="text-center">\n        <div tooltip="{{actionTooltip(system.reports.length)}}" tooltip-trigger="mouseenter" tooltip-append-to-body="true" tooltip-placement="top"><span ng-hide="::system.reports.length" class="icon success"><i class="fa fa-check-circle fa-1-5x text-success"></i></span><span ng-show="::system.reports.length" ng-click="showSystem(system)" class="icon failure"><i class="fa fa-exclamation-circle fa-1-5x text-danger fail"></i></span></div>\n      </td>\n      <td class="text-center"><a ng-click="unregister(system)" title="Unregister System" class="fa fa-close blacklist"></a></td>\n    </tr>\n  </tbody>\n</table>\n<div ng-hide="systems.length" class="text-center">\n  <h4>No Systems</h4>\n</div>'),a.put("components/system/systemTable/systemTable.html",'\n<div class="col-md-6 group-list">\n  <label class="full-width">{{::title}}</label>\n  <input placeholder="Filter" type="text" ng-model="systemsFilter" ng-model-options="{ debounce: 100 }" ng-change="filterSystems()" class="filter full-width"/>\n  <div class="filters-table">\n    <div class="row">\n      <div class="col-xs-6">\n        <label class="select-all">\n          <input type="checkbox" ng-model="checkboxes.checked" ng-indeterminate="indeterminate"/><span>Select Visible</span>\n        </label>\n      </div>\n      <div class="col-xs-6">\n        <div class="pull-right flush-right"><span>Items</span>\n          <div class="dropdown-select dropdown-select-horizontal">\n            <select ng-model="itemsPerPage" ng-options="i for i in items track by i"></select>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div ng-class="{\'scrollable scrollable-table\': _filteredSystems.length &gt; 10}">\n    <div ng-show="loading" class="spinner spinner-lg push-top"></div>\n    <table class="table no-header table-groups">\n      <tbody>\n        <tr ng-repeat="system in _filteredSystems = (filteredSystems | offset:((currentPage-1)*itemsPerPage) | limitTo:itemsPerPage)" data-machine_id="{{system.machine_id}}" ng-click="rowClick($event)" ng-mousedown="rowClick($event)">\n          <td>\n            <label>\n              <input type="checkbox" ng-model="checkboxes.items[system.machine_id]"/><span class="hostname">{{::system.hostname}}</span>\n            </label>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="row groups-footer">\n    <div class="col-xs-12 col-md-5"><a ng-show="type === \'in\'" ng-disabled="!totalChecked" ng-click="removeSystems()" class="link"><i class="fa fa-minus"></i> Remove Systems</a><a ng-hide="type === \'in\'" ng-disabled="!totalChecked" ng-click="addSystems()" class="link"><i class="fa fa-plus"></i> Add Systems</a></div>\n    <div class="col-xs-12 col-md-7">\n      <pagination ng-hide="total &lt;= itemsPerPage" total-items="total" ng-model="currentPage" previous-text="" next-text="" max-size="3" rotate="false" items-per-page="itemsPerPage" ng-change="pageChanged()" class="pull-right pagination-gray"></pagination>\n    </div>\n  </div>\n</div>'),a.put("components/topbar/topbar.html",'\n<div class="top-bar">\n  <div style="margin-bottom: 2em;" class="case-switch"></div>\n  <bullhorn class="top-wrapper"></bullhorn>\n</div>'),a.put("components/yesNo/yesNo.html","<span><i ng-class=\"{'fa-times fail': no, 'fa-check success': yes}\" class=\"fa\"> </i><strong> {{text}}</strong></span>")
}]);
//# sourceMappingURL=app.map